# 2.上下文详解

> https://flowus.cn/share/34340661-a550-493f-9f21-8933260810d6

### 1\. 代码库索引

代码库索引是 ​​​​Cursor​​​​ 的核心功能之一，它允许 AI 助手快速理解和访问您的代码库。通过索引，​​​​Cursor​​​​ 能够提供更准确的代码补全、文档生成和代码审查建议。这不仅提高了开发效率，还减少了潜在的错误和调试时间。

在开发中大型项目中，索引的作用尤为重要。​​​​Cursor​​​​ 会从大规模代码库中快速定位相关信息，并提供更加精准的帮助。

例如，当您在编写一个复杂的处理函数时，​​​​Cursor​​​​ 可以根据索引快速找到相关的函数定义和用法示例。

不知道大家在前面的案例中有没有注意到，我们在 ​​​​Chat​​​​ 界面中提交提问的内容的时候，是点击“​​​​codebase​​​​”按钮，而不是旁边的“​​​​submit​​​​”按钮，这里我来简单说一下这两者的区别

​​​​codebase​​​​：提交代码库中的内容，会根据代码库中的内容进行回答

​​​​submit​​​​：提交 ​​​​Chat​​​​ 界面中的内容，会根据 ​​​​Chat​​​​ 界面中的内容进行回答

![](https://raw.githubusercontent.com/QC2168/note-img/main/20250122120908.png)

#### 如何索引代码库

这一步 ​​​​Cursor​​​​ 会自动完成，不需要我们手动操作。

我们只需要用 ​​​​Cursor​​​​ 打开项目，​​​​Cursor​​​​ 会自动索引代码库。（注意的是，这个过程可能需要一些时间，具体取决于代码库的大小和复杂性）

#### 查看索引状态

在 ​​​​Cursor​​​​ 的设置页面中，你可以随时查看当前项目的索引状态，也可以配置一些高级选项

![](https://raw.githubusercontent.com/QC2168/note-img/main/20250122121415.png)

上面提到 cursor 会自动索引项目代码，如果你不需要该功能，可以在设置页面中关闭它

#### 忽略文件

默认情况下 ​​​​cursor​​​​ 会索引项目中的所有文件（除了 ​​​​.gitignore​​​​ 中的文件），如果你的项目中有一些文件不想被索引，你可以在项目中配置 ​​​​.cursorignore​​​​ 文件来指定这些忽略规则。

配置 ​​​​.cursorignore​​​​ 这有助于提高索引效率，减少不必要的资源消耗，并保护敏感信息不被 ​​​​Cursor​​​​ 处理。

与 ​​​​.gitignore​​​​ 的关系 ​​​​.cursorignore​​​​ 的工作方式与 ​​​​.gitignore​​​​ 类似，它们都使用相同的语法来指定忽略规则

如果您已经熟悉 ​​​​.gitignore​​​​，那么使用 ​​​​.cursorignore​​​​ 将变得非常简单。

​​​​.cursorignore​​​​ 对聊天和编辑器的影响 需要注意的是，尽管 ​​​​.cursorignore​​​​ 文件会影响代码库的索引，但 ​​​​Cursor​​​​ 的聊天和编辑器上下文目前仍然可以访问所有文件，忽略文件设置对此无效。

#### .cursorignore​​​​ 示例

忽略特定文件和目录 下面是 ​​​​.cursorignore​​​​ 文件的示例规则：

```
# 忽略所有在dist目录中的文件
dist/
# 忽略所有.log文件
*.log
# 忽略特定的config.json文件
config.json
```

仅包含特定文件 如果您只想索引特定类型的文件，可以使用以下规则：

```
# 忽略所有文件
# 不忽略app目录
!app/
# 不忽略app目录内的子目录
!app/*/
!app/**/*/
```

### 2\. AI 规则

#### 自定义 AI 行为

全局和项目特定规则 ​​​​Cursor​​​​ 允许您定义全局和项目特定的 AI 规则。全局规则适用于所有项目，而项目特定规则仅影响当前项目。这种灵活性使得您可以根据不同的项目需求定制 ​​​​AI​​​​ 的行为。

我们之前都是直接在 ​​​​Cursor​​​​ 的 ​​​​Chat​​​​，​​​​Composer​​​​ 面板中直接和 AI 对话和交互，并没有给定一些前置的规则指令，这有可能导致 ​​​​AI​​​​ 回答不准确

我们可以在 ​​​​Cursor​​​​ 的设置页面中，添加一些全局规则，这些规则会应用到所有项目中

![](https://raw.githubusercontent.com/QC2168/note-img/main/20250122122820.png)

比如这里的 ​​​​Cursor​​​​ 的默认规则，告诉 ​​​​AI​​​​，每次在回答问题的时候，请使用中文来回答

#### .cursorrules 文件

有时，我们的 ​​​​AI​​​​ 规则可能是不同的，比如在不同的项目中，使用的语言，或者开发框架不同，我们需要使用不同的规则来回答问题

我们可以在项目中配置 ​​​​.cursorrules​​​​ 文件来指定这些规则，来告诉 ​​​​AI​​​​ 应该怎么来回答问题

​​​​.cursorrules​​​​ 文件是 ​​​​Cursor​​​​ 用于存储项目特定指令的地方。在这个文件中，您可以定义如何处理特定的代码片段，指定代码风格，甚至指导 ​​​​Cursor​​​​ 生成特定的代码结构

这里给大家推荐一个仓库，里面有各种语言的 ​​​​AI​​​​ 规则，大家可以参考一下

#### AI 规则仓库

​​​​[Cursor](https://github.com/PatrickJS/awesome-cursorrules)​​​​[

规则的应用范围 规则的应用范围可以是整个项目，也可以是特定的文件或目录。通过精确控制规则的应用范围，您可以确保 ​​​​Cursor​​​​ 的行为符合您的开发标准。

#### 总结

​​​​Cursor​​​​ 通过智能索引和自定义 AI 规则，大幅提升编程效率，优化代码质量，助力开发者高效开发
​​
