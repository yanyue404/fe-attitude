<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Node.js | 我的前端态度</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="记录自己的学习考古，会前端真的可以“为所欲为”maybe">
    
    <link rel="preload" href="/fe-attitude/assets/css/0.styles.52e064f1.css" as="style"><link rel="preload" href="/fe-attitude/assets/js/app.7a42581c.js" as="script"><link rel="preload" href="/fe-attitude/assets/js/2.e3af99bf.js" as="script"><link rel="preload" href="/fe-attitude/assets/js/21.7c7ee976.js" as="script"><link rel="prefetch" href="/fe-attitude/assets/js/10.1fd95463.js"><link rel="prefetch" href="/fe-attitude/assets/js/11.755b0182.js"><link rel="prefetch" href="/fe-attitude/assets/js/12.56a246bd.js"><link rel="prefetch" href="/fe-attitude/assets/js/13.1596e74a.js"><link rel="prefetch" href="/fe-attitude/assets/js/14.d48716cc.js"><link rel="prefetch" href="/fe-attitude/assets/js/15.0725d236.js"><link rel="prefetch" href="/fe-attitude/assets/js/16.0f38748a.js"><link rel="prefetch" href="/fe-attitude/assets/js/17.92bbb27c.js"><link rel="prefetch" href="/fe-attitude/assets/js/18.a88d8c5a.js"><link rel="prefetch" href="/fe-attitude/assets/js/19.5a9238e7.js"><link rel="prefetch" href="/fe-attitude/assets/js/20.b508093b.js"><link rel="prefetch" href="/fe-attitude/assets/js/22.0d643ddd.js"><link rel="prefetch" href="/fe-attitude/assets/js/23.0eb45118.js"><link rel="prefetch" href="/fe-attitude/assets/js/24.5e1a2929.js"><link rel="prefetch" href="/fe-attitude/assets/js/25.25df588f.js"><link rel="prefetch" href="/fe-attitude/assets/js/26.86a3e548.js"><link rel="prefetch" href="/fe-attitude/assets/js/27.7570be2e.js"><link rel="prefetch" href="/fe-attitude/assets/js/28.99948a2f.js"><link rel="prefetch" href="/fe-attitude/assets/js/29.57d23ed2.js"><link rel="prefetch" href="/fe-attitude/assets/js/3.7a47e54d.js"><link rel="prefetch" href="/fe-attitude/assets/js/30.cded95ab.js"><link rel="prefetch" href="/fe-attitude/assets/js/31.673a888b.js"><link rel="prefetch" href="/fe-attitude/assets/js/32.dcadbc94.js"><link rel="prefetch" href="/fe-attitude/assets/js/4.1fdba925.js"><link rel="prefetch" href="/fe-attitude/assets/js/5.e978ac0b.js"><link rel="prefetch" href="/fe-attitude/assets/js/6.4d20b163.js"><link rel="prefetch" href="/fe-attitude/assets/js/7.aae27088.js"><link rel="prefetch" href="/fe-attitude/assets/js/8.310cc6b9.js"><link rel="prefetch" href="/fe-attitude/assets/js/9.98b0c5fd.js">
    <link rel="stylesheet" href="/fe-attitude/assets/css/0.styles.52e064f1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/fe-attitude/" class="home-link router-link-active"><!----> <span class="site-name">我的前端态度</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="构建知识体系" class="dropdown-title"><span class="title">构建知识体系</span> <span class="arrow down"></span></button> <button type="button" aria-label="构建知识体系" class="mobile-dropdown-title"><span class="title">构建知识体系</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          前端
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/fe-attitude/fe/self-check.html" class="nav-link">
  自检
</a></li><li class="dropdown-subitem"><a href="/fe-attitude/fe/html.html" class="nav-link">
  Html
</a></li><li class="dropdown-subitem"><a href="/fe-attitude/fe/css.html" class="nav-link">
  CSS
</a></li><li class="dropdown-subitem"><a href="/fe-attitude/fe/javascript.html" class="nav-link">
  JavaScript
</a></li><li class="dropdown-subitem"><a href="/fe-attitude/fe/typescript.html" class="nav-link">
  TypeScript
</a></li><li class="dropdown-subitem"><a href="/fe-attitude/fe/write.html" class="nav-link">
  手写代码
</a></li><li class="dropdown-subitem"><a href="/fe-attitude/fe/console.html" class="nav-link">
  输出结果
</a></li><li class="dropdown-subitem"><a href="/fe-attitude/fe/design.html" class="nav-link">
  设计模式
</a></li><li class="dropdown-subitem"><a href="/fe-attitude/fe/browser.html" class="nav-link">
  浏览器
</a></li><li class="dropdown-subitem"><a href="/fe-attitude/fe/network.html" class="nav-link">
  计算机网络
</a></li><li class="dropdown-subitem"><a href="/fe-attitude/fe/algorithm.html" class="nav-link">
  算法
</a></li><li class="dropdown-subitem"><a href="/fe-attitude/fe/vue.html" class="nav-link">
  Vue
</a></li><li class="dropdown-subitem"><a href="/fe-attitude/fe/react.html" class="nav-link">
  React
</a></li><li class="dropdown-subitem"><a href="/fe-attitude/fe/node.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Node
</a></li><li class="dropdown-subitem"><a href="/fe-attitude/fe/skill.html" class="nav-link">
  编程技巧
</a></li><li class="dropdown-subitem"><a href="/fe-attitude/fe/engineering.html" class="nav-link">
  工程化
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="专题学习计划" class="dropdown-title"><span class="title">专题学习计划</span> <span class="arrow down"></span></button> <button type="button" aria-label="专题学习计划" class="mobile-dropdown-title"><span class="title">专题学习计划</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          正则表达式
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://github.com/yanyue404/blog/issues/113" target="_blank" rel="noopener noreferrer" class="nav-link external">
  正则手记——语法篇
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/yanyue404/blog/issues/245" target="_blank" rel="noopener noreferrer" class="nav-link external">
  正则手记——方法篇
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/yanyue404/blog/issues/230" target="_blank" rel="noopener noreferrer" class="nav-link external">
  正则手记——实例篇
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          前端常见需求的解决方案
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://github.com/yanyue404/blog/issues/248" target="_blank" rel="noopener noreferrer" class="nav-link external">
  玩转异步
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          组件库源码学习课
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://github.com/yanyue404/blog/issues/250" target="_blank" rel="noopener noreferrer" class="nav-link external">
  vant2 popup 源码学习
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/yanyue404/blog/issues/268" target="_blank" rel="noopener noreferrer" class="nav-link external">
  跟着 Vant Dialog 学习函数调用使用组件
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          Vue 源码解读
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://github.com/yanyue404/blog/issues/274" target="_blank" rel="noopener noreferrer" class="nav-link external">
  探索 Vue.js 内部运行机制
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="使用资源" class="dropdown-title"><span class="title">使用资源</span> <span class="arrow down"></span></button> <button type="button" aria-label="使用资源" class="mobile-dropdown-title"><span class="title">使用资源</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          推荐资源
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/fe-attitude/use/website.html" class="nav-link">
  在线工具
</a></li><li class="dropdown-subitem"><a href="/fe-attitude/use/tutorial.html" class="nav-link">
  在线教程
</a></li><li class="dropdown-subitem"><a href="/fe-attitude/use/repos.html" class="nav-link">
  前端库与框架
</a></li><li class="dropdown-subitem"><a href="/fe-attitude/use/articles.html" class="nav-link">
  优秀文章
</a></li></ul></li><li class="dropdown-item"><h4>
          打造舒适、高效、时尚的前端开发环境
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://github.com/yanyue404/blog/issues/3" target="_blank" rel="noopener noreferrer" class="nav-link external">
  开发环境的搭建（含 Chrome 配置）
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/yanyue404/blog/issues?q=is%3Aissue+is%3Aopen+in%3Atitle+git" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Git 协作
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/yanyue404/blog/issues/42" target="_blank" rel="noopener noreferrer" class="nav-link external">
  玩好 Terminal 终端 
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/yanyue404/blog/issues/185" target="_blank" rel="noopener noreferrer" class="nav-link external">
  VS Code 编辑器配置 
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/yanyue404/blog/issues/204" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Whistle 代理抓包 
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/yanyue404/blog/issues?q=is%3Aissue+is%3Aopen+in%3Atitle+node" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Node.js 相关
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/yanyue404/blog/issues/278" target="_blank" rel="noopener noreferrer" class="nav-link external">
  拥抱 AI
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          工具
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/fe-attitude/tools/format-Markdown.html" class="nav-link">
  Markdown 格式化工具
</a></li><li class="dropdown-subitem"><a href="/fe-attitude/tools/docx-to-html.html" class="nav-link">
  docx 转 html
</a></li><li class="dropdown-subitem"><a href="/fe-attitude/tools/regex.html" class="nav-link">
  正则表达式生成器
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="我的 Reops" class="dropdown-title"><span class="title">我的 Reops</span> <span class="arrow down"></span></button> <button type="button" aria-label="我的 Reops" class="mobile-dropdown-title"><span class="title">我的 Reops</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          原创作品
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://github.com/yanyue404/blog/issues" target="_blank" rel="noopener noreferrer" class="nav-link external">
  个人博客
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/yanyue404/node-crawler" target="_blank" rel="noopener noreferrer" class="nav-link external">
  node 爬虫自用工具
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/yanyue404/beyond-ui" target="_blank" rel="noopener noreferrer" class="nav-link external">
  beyond-ui
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://yanyue404.github.io/dev-admin/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  用于开发的管理工具
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/yanyue404/nuxt-issue-blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub Issue 博客静态站点生成
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/yanyue404/build-my-own-extension" target="_blank" rel="noopener noreferrer" class="nav-link external">
  油猴脚本 &amp; 浏览器扩展
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/yanyue404/vscode-extension-ts" target="_blank" rel="noopener noreferrer" class="nav-link external">
  VS Code 快速语音笔记插件
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          Npm
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://github.com/yanyue404/rainbow-shared" target="_blank" rel="noopener noreferrer" class="nav-link external">
  rainbow 的 实用函数
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/yanyue404/issues2md" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Export Github Issues to markdown file
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          开源项目文档（Fork)
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://yanyue404.github.io/vant/#/zh-CN" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vant 组件库
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://yanyue404.github.io/element/#/zh-CN/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Element 组件库
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://yanyue404.github.io/vue-design/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vue 技术内幕
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://yanyue404.github.io/vue2/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vue 2 官方文档
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://yanyue404.github.io/vue-template-compiler-playground/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vue 模板编译器 Playground
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          其他兴趣
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://yanyue404.github.io/mingdao/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  记录王明道先生的文字
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/yanyue404/cook" target="_blank" rel="noopener noreferrer" class="nav-link external">
  How to Cook
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div> <a href="https://github.com/yanyue404/fe-attitude" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="构建知识体系" class="dropdown-title"><span class="title">构建知识体系</span> <span class="arrow down"></span></button> <button type="button" aria-label="构建知识体系" class="mobile-dropdown-title"><span class="title">构建知识体系</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          前端
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/fe-attitude/fe/self-check.html" class="nav-link">
  自检
</a></li><li class="dropdown-subitem"><a href="/fe-attitude/fe/html.html" class="nav-link">
  Html
</a></li><li class="dropdown-subitem"><a href="/fe-attitude/fe/css.html" class="nav-link">
  CSS
</a></li><li class="dropdown-subitem"><a href="/fe-attitude/fe/javascript.html" class="nav-link">
  JavaScript
</a></li><li class="dropdown-subitem"><a href="/fe-attitude/fe/typescript.html" class="nav-link">
  TypeScript
</a></li><li class="dropdown-subitem"><a href="/fe-attitude/fe/write.html" class="nav-link">
  手写代码
</a></li><li class="dropdown-subitem"><a href="/fe-attitude/fe/console.html" class="nav-link">
  输出结果
</a></li><li class="dropdown-subitem"><a href="/fe-attitude/fe/design.html" class="nav-link">
  设计模式
</a></li><li class="dropdown-subitem"><a href="/fe-attitude/fe/browser.html" class="nav-link">
  浏览器
</a></li><li class="dropdown-subitem"><a href="/fe-attitude/fe/network.html" class="nav-link">
  计算机网络
</a></li><li class="dropdown-subitem"><a href="/fe-attitude/fe/algorithm.html" class="nav-link">
  算法
</a></li><li class="dropdown-subitem"><a href="/fe-attitude/fe/vue.html" class="nav-link">
  Vue
</a></li><li class="dropdown-subitem"><a href="/fe-attitude/fe/react.html" class="nav-link">
  React
</a></li><li class="dropdown-subitem"><a href="/fe-attitude/fe/node.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Node
</a></li><li class="dropdown-subitem"><a href="/fe-attitude/fe/skill.html" class="nav-link">
  编程技巧
</a></li><li class="dropdown-subitem"><a href="/fe-attitude/fe/engineering.html" class="nav-link">
  工程化
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="专题学习计划" class="dropdown-title"><span class="title">专题学习计划</span> <span class="arrow down"></span></button> <button type="button" aria-label="专题学习计划" class="mobile-dropdown-title"><span class="title">专题学习计划</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          正则表达式
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://github.com/yanyue404/blog/issues/113" target="_blank" rel="noopener noreferrer" class="nav-link external">
  正则手记——语法篇
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/yanyue404/blog/issues/245" target="_blank" rel="noopener noreferrer" class="nav-link external">
  正则手记——方法篇
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/yanyue404/blog/issues/230" target="_blank" rel="noopener noreferrer" class="nav-link external">
  正则手记——实例篇
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          前端常见需求的解决方案
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://github.com/yanyue404/blog/issues/248" target="_blank" rel="noopener noreferrer" class="nav-link external">
  玩转异步
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          组件库源码学习课
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://github.com/yanyue404/blog/issues/250" target="_blank" rel="noopener noreferrer" class="nav-link external">
  vant2 popup 源码学习
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/yanyue404/blog/issues/268" target="_blank" rel="noopener noreferrer" class="nav-link external">
  跟着 Vant Dialog 学习函数调用使用组件
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          Vue 源码解读
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://github.com/yanyue404/blog/issues/274" target="_blank" rel="noopener noreferrer" class="nav-link external">
  探索 Vue.js 内部运行机制
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="使用资源" class="dropdown-title"><span class="title">使用资源</span> <span class="arrow down"></span></button> <button type="button" aria-label="使用资源" class="mobile-dropdown-title"><span class="title">使用资源</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          推荐资源
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/fe-attitude/use/website.html" class="nav-link">
  在线工具
</a></li><li class="dropdown-subitem"><a href="/fe-attitude/use/tutorial.html" class="nav-link">
  在线教程
</a></li><li class="dropdown-subitem"><a href="/fe-attitude/use/repos.html" class="nav-link">
  前端库与框架
</a></li><li class="dropdown-subitem"><a href="/fe-attitude/use/articles.html" class="nav-link">
  优秀文章
</a></li></ul></li><li class="dropdown-item"><h4>
          打造舒适、高效、时尚的前端开发环境
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://github.com/yanyue404/blog/issues/3" target="_blank" rel="noopener noreferrer" class="nav-link external">
  开发环境的搭建（含 Chrome 配置）
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/yanyue404/blog/issues?q=is%3Aissue+is%3Aopen+in%3Atitle+git" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Git 协作
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/yanyue404/blog/issues/42" target="_blank" rel="noopener noreferrer" class="nav-link external">
  玩好 Terminal 终端 
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/yanyue404/blog/issues/185" target="_blank" rel="noopener noreferrer" class="nav-link external">
  VS Code 编辑器配置 
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/yanyue404/blog/issues/204" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Whistle 代理抓包 
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/yanyue404/blog/issues?q=is%3Aissue+is%3Aopen+in%3Atitle+node" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Node.js 相关
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/yanyue404/blog/issues/278" target="_blank" rel="noopener noreferrer" class="nav-link external">
  拥抱 AI
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          工具
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/fe-attitude/tools/format-Markdown.html" class="nav-link">
  Markdown 格式化工具
</a></li><li class="dropdown-subitem"><a href="/fe-attitude/tools/docx-to-html.html" class="nav-link">
  docx 转 html
</a></li><li class="dropdown-subitem"><a href="/fe-attitude/tools/regex.html" class="nav-link">
  正则表达式生成器
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="我的 Reops" class="dropdown-title"><span class="title">我的 Reops</span> <span class="arrow down"></span></button> <button type="button" aria-label="我的 Reops" class="mobile-dropdown-title"><span class="title">我的 Reops</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          原创作品
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://github.com/yanyue404/blog/issues" target="_blank" rel="noopener noreferrer" class="nav-link external">
  个人博客
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/yanyue404/node-crawler" target="_blank" rel="noopener noreferrer" class="nav-link external">
  node 爬虫自用工具
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/yanyue404/beyond-ui" target="_blank" rel="noopener noreferrer" class="nav-link external">
  beyond-ui
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://yanyue404.github.io/dev-admin/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  用于开发的管理工具
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/yanyue404/nuxt-issue-blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub Issue 博客静态站点生成
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/yanyue404/build-my-own-extension" target="_blank" rel="noopener noreferrer" class="nav-link external">
  油猴脚本 &amp; 浏览器扩展
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/yanyue404/vscode-extension-ts" target="_blank" rel="noopener noreferrer" class="nav-link external">
  VS Code 快速语音笔记插件
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          Npm
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://github.com/yanyue404/rainbow-shared" target="_blank" rel="noopener noreferrer" class="nav-link external">
  rainbow 的 实用函数
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/yanyue404/issues2md" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Export Github Issues to markdown file
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          开源项目文档（Fork)
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://yanyue404.github.io/vant/#/zh-CN" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vant 组件库
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://yanyue404.github.io/element/#/zh-CN/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Element 组件库
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://yanyue404.github.io/vue-design/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vue 技术内幕
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://yanyue404.github.io/vue2/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vue 2 官方文档
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://yanyue404.github.io/vue-template-compiler-playground/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vue 模板编译器 Playground
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          其他兴趣
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://yanyue404.github.io/mingdao/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  记录王明道先生的文字
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/yanyue404/cook" target="_blank" rel="noopener noreferrer" class="nav-link external">
  How to Cook
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div> <a href="https://github.com/yanyue404/fe-attitude" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Node.js</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/fe-attitude/fe/node.html#对-node-js-的理解-优缺点-应用场景" class="sidebar-link">对 Node.js 的理解？优缺点？应用场景？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/fe-attitude/fe/node.html#一、是什么" class="sidebar-link">一、是什么</a></li><li class="sidebar-sub-header"><a href="/fe-attitude/fe/node.html#非阻塞异步" class="sidebar-link">非阻塞异步</a></li><li class="sidebar-sub-header"><a href="/fe-attitude/fe/node.html#事件驱动" class="sidebar-link">事件驱动</a></li><li class="sidebar-sub-header"><a href="/fe-attitude/fe/node.html#二、优缺点" class="sidebar-link">二、优缺点</a></li><li class="sidebar-sub-header"><a href="/fe-attitude/fe/node.html#三、应用场景" class="sidebar-link">三、应用场景</a></li><li class="sidebar-sub-header"><a href="/fe-attitude/fe/node.html#参考文献" class="sidebar-link">参考文献</a></li></ul></li><li><a href="/fe-attitude/fe/node.html#node-js-有哪些全局对象" class="sidebar-link">Node. js 有哪些全局对象？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/fe-attitude/fe/node.html#一、是什么-2" class="sidebar-link">一、是什么</a></li><li class="sidebar-sub-header"><a href="/fe-attitude/fe/node.html#二、有哪些" class="sidebar-link">二、有哪些</a></li><li class="sidebar-sub-header"><a href="/fe-attitude/fe/node.html#真正的全局对象" class="sidebar-link">真正的全局对象</a></li><li class="sidebar-sub-header"><a href="/fe-attitude/fe/node.html#模块级别的全局对象" class="sidebar-link">模块级别的全局对象</a></li><li class="sidebar-sub-header"><a href="/fe-attitude/fe/node.html#参考文献-2" class="sidebar-link">参考文献</a></li></ul></li><li><a href="/fe-attitude/fe/node.html#对-node-中的-process-的理解-有哪些常用方法" class="sidebar-link">对 Node 中的 process 的理解？有哪些常用方法？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/fe-attitude/fe/node.html#一、是什么-3" class="sidebar-link">一、是什么</a></li><li class="sidebar-sub-header"><a href="/fe-attitude/fe/node.html#二、属性与方法" class="sidebar-link">二、属性与方法</a></li><li class="sidebar-sub-header"><a href="/fe-attitude/fe/node.html#参考文献-3" class="sidebar-link">参考文献</a></li></ul></li><li><a href="/fe-attitude/fe/node.html#对-node-中的-fs-模块的理解-有哪些常用方法" class="sidebar-link">对 Node 中的 fs 模块的理解? 有哪些常用方法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/fe-attitude/fe/node.html#一、是什么-4" class="sidebar-link">一、是什么</a></li><li class="sidebar-sub-header"><a href="/fe-attitude/fe/node.html#二、文件知识" class="sidebar-link">二、文件知识</a></li><li class="sidebar-sub-header"><a href="/fe-attitude/fe/node.html#三、方法" class="sidebar-link">三、方法</a></li><li class="sidebar-sub-header"><a href="/fe-attitude/fe/node.html#文件读取" class="sidebar-link">文件读取</a></li><li class="sidebar-sub-header"><a href="/fe-attitude/fe/node.html#文件写入" class="sidebar-link">文件写入</a></li><li class="sidebar-sub-header"><a href="/fe-attitude/fe/node.html#文件追加写入" class="sidebar-link">文件追加写入</a></li><li class="sidebar-sub-header"><a href="/fe-attitude/fe/node.html#文件拷贝" class="sidebar-link">文件拷贝</a></li><li class="sidebar-sub-header"><a href="/fe-attitude/fe/node.html#创建目录" class="sidebar-link">创建目录</a></li><li class="sidebar-sub-header"><a href="/fe-attitude/fe/node.html#参考文献-4" class="sidebar-link">参考文献</a></li></ul></li><li><a href="/fe-attitude/fe/node.html#对-node-中的-buffer-的理解-应用场景" class="sidebar-link">对 Node 中的 Buffer 的理解？应用场景？</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/fe-attitude/fe/node.html#对-node-中的-stream-的理解-应用场景" class="sidebar-link">对 Node 中的 Stream 的理解？应用场景？</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/fe-attitude/fe/node.html#说说-node-中的-eventemitter-如何实现一个-eventemitter" class="sidebar-link">说说 Node 中的 EventEmitter? 如何实现一个 EventEmitter?</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/fe-attitude/fe/node.html#说说对-nodejs-中的事件循环机制理解" class="sidebar-link">说说对 Nodejs 中的事件循环机制理解?</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/fe-attitude/fe/node.html#一、是什么-5" class="sidebar-link">一、是什么</a></li><li class="sidebar-sub-header"><a href="/fe-attitude/fe/node.html#二、流程" class="sidebar-link">二、流程</a></li><li class="sidebar-sub-header"><a href="/fe-attitude/fe/node.html#三、题目" class="sidebar-link">三、题目</a></li><li class="sidebar-sub-header"><a href="/fe-attitude/fe/node.html#参考文献-5" class="sidebar-link">参考文献</a></li></ul></li><li><a href="/fe-attitude/fe/node.html#说-node-文件查找的优先级以及-require-方法的文件查找策略" class="sidebar-link">说 Node 文件查找的优先级以及 Require 方法的文件查找策略?</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/fe-attitude/fe/node.html#说说对中间件概念的理解-如何封装-node-中间件" class="sidebar-link">说说对中间件概念的理解，如何封装 node 中间件？</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/fe-attitude/fe/node.html#如何实现-jwt-鉴权机制-说说你的思路" class="sidebar-link">如何实现 jwt 鉴权机制？说说你的思路</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/fe-attitude/fe/node.html#一、是什么-6" class="sidebar-link">一、是什么</a></li><li class="sidebar-sub-header"><a href="/fe-attitude/fe/node.html#header" class="sidebar-link">header</a></li><li class="sidebar-sub-header"><a href="/fe-attitude/fe/node.html#payload" class="sidebar-link">payload</a></li><li class="sidebar-sub-header"><a href="/fe-attitude/fe/node.html#signature" class="sidebar-link">Signature</a></li><li class="sidebar-sub-header"><a href="/fe-attitude/fe/node.html#二、如何实现" class="sidebar-link">二、如何实现</a></li><li class="sidebar-sub-header"><a href="/fe-attitude/fe/node.html#生成-token" class="sidebar-link">生成 token</a></li><li class="sidebar-sub-header"><a href="/fe-attitude/fe/node.html#校验-token" class="sidebar-link">校验 token</a></li><li class="sidebar-sub-header"><a href="/fe-attitude/fe/node.html#三、优缺点" class="sidebar-link">三、优缺点</a></li><li class="sidebar-sub-header"><a href="/fe-attitude/fe/node.html#参考文献-6" class="sidebar-link">参考文献</a></li></ul></li><li><a href="/fe-attitude/fe/node.html#如何实现文件上传-说说你的思路" class="sidebar-link">如何实现文件上传？说说你的思路</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/fe-attitude/fe/node.html#一、是什么-7" class="sidebar-link">一、是什么</a></li><li class="sidebar-sub-header"><a href="/fe-attitude/fe/node.html#二、如何实现-2" class="sidebar-link">二、如何实现</a></li><li class="sidebar-sub-header"><a href="/fe-attitude/fe/node.html#文件上传" class="sidebar-link">文件上传</a></li><li class="sidebar-sub-header"><a href="/fe-attitude/fe/node.html#文件解析" class="sidebar-link">文件解析</a></li><li class="sidebar-sub-header"><a href="/fe-attitude/fe/node.html#参考文献-7" class="sidebar-link">参考文献</a></li></ul></li><li><a href="/fe-attitude/fe/node.html#如果让你来设计一个分页功能-你会怎么设计-前后端如何交互" class="sidebar-link">如果让你来设计一个分页功能, 你会怎么设计? 前后端如何交互?</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/fe-attitude/fe/node.html#一、是什么-8" class="sidebar-link">一、是什么</a></li><li class="sidebar-sub-header"><a href="/fe-attitude/fe/node.html#二、如何实现-3" class="sidebar-link">二、如何实现</a></li><li class="sidebar-sub-header"><a href="/fe-attitude/fe/node.html#三、总结" class="sidebar-link">三、总结</a></li><li class="sidebar-sub-header"><a href="/fe-attitude/fe/node.html#参考文献-8" class="sidebar-link">参考文献</a></li></ul></li><li><a href="/fe-attitude/fe/node.html#node-性能如何进行监控以及优化" class="sidebar-link">Node 性能如何进行监控以及优化？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/fe-attitude/fe/node.html#一、-是什么" class="sidebar-link">一、 是什么</a></li><li class="sidebar-sub-header"><a href="/fe-attitude/fe/node.html#cpu" class="sidebar-link">CPU</a></li><li class="sidebar-sub-header"><a href="/fe-attitude/fe/node.html#内存指标" class="sidebar-link">内存指标</a></li><li class="sidebar-sub-header"><a href="/fe-attitude/fe/node.html#磁盘-i-o" class="sidebar-link">磁盘 I/O</a></li><li class="sidebar-sub-header"><a href="/fe-attitude/fe/node.html#二、如何监控" class="sidebar-link">二、如何监控</a></li><li class="sidebar-sub-header"><a href="/fe-attitude/fe/node.html#三、如何优化" class="sidebar-link">三、如何优化</a></li><li class="sidebar-sub-header"><a href="/fe-attitude/fe/node.html#使用最新版本-node-js" class="sidebar-link">使用最新版本 Node.js</a></li><li class="sidebar-sub-header"><a href="/fe-attitude/fe/node.html#正确使用流-stream" class="sidebar-link">正确使用流 Stream</a></li><li class="sidebar-sub-header"><a href="/fe-attitude/fe/node.html#代码层面优化" class="sidebar-link">代码层面优化</a></li><li class="sidebar-sub-header"><a href="/fe-attitude/fe/node.html#内存管理优化" class="sidebar-link">内存管理优化</a></li><li class="sidebar-sub-header"><a href="/fe-attitude/fe/node.html#参考文献-9" class="sidebar-link">参考文献</a></li></ul></li><li><a href="/fe-attitude/fe/node.html#package-json-中-scripts-的-postinstall-install-preinstall" class="sidebar-link">package.json 中 scripts 的 postinstall, install， preinstall</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/fe-attitude/fe/node.html#preinstall" class="sidebar-link">preinstall</a></li><li class="sidebar-sub-header"><a href="/fe-attitude/fe/node.html#install" class="sidebar-link">install</a></li><li class="sidebar-sub-header"><a href="/fe-attitude/fe/node.html#postinstall" class="sidebar-link">postinstall</a></li></ul></li><li><a href="/fe-attitude/fe/node.html#pm2" class="sidebar-link">PM2</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/fe-attitude/fe/node.html#对-node-中-commonjs-和-es-modules-及-node-发展的理解" class="sidebar-link">对 Node 中 CommonJS 和 ES Modules，及 Node 发展的理解</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/fe-attitude/fe/node.html#一、node-js-中-require-和-mjs-的使用" class="sidebar-link">一、Node.js 中 require 和 .mjs 的使用</a></li><li class="sidebar-sub-header"><a href="/fe-attitude/fe/node.html#二、node-js-当前发展现状-截至-2025年4月28日" class="sidebar-link">二、Node.js 当前发展现状（截至 2025年4月28日）</a></li><li class="sidebar-sub-header"><a href="/fe-attitude/fe/node.html#三、总结与建议" class="sidebar-link">三、总结与建议</a></li></ul></li><li><a href="/fe-attitude/fe/node.html#参考" class="sidebar-link">参考</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="node-js"><a href="#node-js" class="header-anchor">#</a> Node.js</h1> <h2 id="对-node-js-的理解-优缺点-应用场景"><a href="#对-node-js-的理解-优缺点-应用场景" class="header-anchor">#</a> 对 Node.js 的理解？优缺点？应用场景？</h2> <h3 id="一、是什么"><a href="#一、是什么" class="header-anchor">#</a> 一、是什么</h3> <p><code>Node.js</code> 是一个开源与跨平台的 <code>JavaScript</code> 运行时环境</p> <p>在浏览器外运行 V8 JavaScript 引擎（Google Chrome 的内核），利用事件驱动、非阻塞和异步输入输出模型等技术提高性能</p> <p>可以理解为 <code>Node.js</code> 就是一个服务器端的、非阻塞式 I/O 的、事件驱动的<code>JavaScript</code>运行环境</p> <h3 id="非阻塞异步"><a href="#非阻塞异步" class="header-anchor">#</a> 非阻塞异步</h3> <p><code>Nodejs</code>采用了非阻塞型<code>I/O</code>机制，在做<code>I/O</code>操作的时候不会造成任何的阻塞，当完成之后，以时间的形式通知执行操作</p> <p>例如在执行了访问数据库的代码之后，将立即转而执行其后面的代码，把数据库返回结果的处理代码放在回调函数中，从而提高了程序的执行效率</p> <h3 id="事件驱动"><a href="#事件驱动" class="header-anchor">#</a> 事件驱动</h3> <p>事件驱动就是当进来一个新的请求的时，请求将会被压入一个事件队列中，然后通过一个循环来检测队列中的事件状态变化，如果检测到有状态变化的事件，那么就执行该事件对应的处理代码，一般都是回调函数</p> <p>比如读取一个文件，文件读取完毕后，就会触发对应的状态，然后通过对应的回调函数来进行处理</p> <p><img src="https://static.vue-js.com/a7729590-c1e8-11eb-ab90-d9ae814b240d.png" alt=""></p> <h3 id="二、优缺点"><a href="#二、优缺点" class="header-anchor">#</a> 二、优缺点</h3> <p>优点：</p> <ul><li>处理高并发场景性能更佳</li> <li>适合 I/O 密集型应用，值的是应用在运行极限时，CPU 占用率仍然比较低，大部分时间是在做 I/O 硬盘内存读写操作</li></ul> <p>因为<code>Nodejs</code>是单线程，带来的缺点有：</p> <ul><li>不适合 CPU 密集型应用</li> <li>只支持单核 CPU，不能充分利用 CPU</li> <li>可靠性低，一旦代码某个环节崩溃，整个系统都崩溃</li></ul> <h3 id="三、应用场景"><a href="#三、应用场景" class="header-anchor">#</a> 三、应用场景</h3> <p>借助<code>Nodejs</code>的特点和弊端，其应用场景分类如下：</p> <ul><li>善于<code>I/O</code>，不善于计算。因为 Nodejs 是一个单线程，如果计算（同步）太多，则会阻塞这个线程</li> <li>大量并发的 I/O，应用程序内部并不需要进行非常复杂的处理</li> <li>与 websocket 配合，开发长连接的实时交互应用程序</li></ul> <p>具体场景可以表现为如下：</p> <ul><li>第一大类：用户表单收集系统、后台管理系统、实时交互系统、考试系统、联网软件、高并发量的 web 应用程序</li> <li>第二大类：基于 web、canvas 等多人联网游戏</li> <li>第三大类：基于 web 的多人实时聊天客户端、聊天室、图文直播</li> <li>第四大类：单页面浏览器应用程序</li> <li>第五大类：操作数据库、为前端和移动端提供基于<code>json</code>的 API</li></ul> <p>其实，<code>Nodejs</code>能实现几乎一切的应用，只考虑适不适合使用它</p> <h3 id="参考文献"><a href="#参考文献" class="header-anchor">#</a> 参考文献</h3> <ul><li>http://nodejs.cn/</li> <li>https://segmentfault.com/a/1190000019854308</li> <li>https://segmentfault.com/a/1190000005173218</li></ul> <h2 id="node-js-有哪些全局对象"><a href="#node-js-有哪些全局对象" class="header-anchor">#</a> Node. js 有哪些全局对象？</h2> <h3 id="一、是什么-2"><a href="#一、是什么-2" class="header-anchor">#</a> 一、是什么</h3> <p>在浏览器 <code>JavaScript</code> 中，通常<code>window</code> 是全局对象， 而 <code>Nodejs</code>中的全局对象是 <code>global</code></p> <p>在<code>NodeJS</code>里，是不可能在最外层定义一个变量，因为所有的用户代码都是当前模块的，只在当前模块里可用，但可以通过<code>exports</code>对象的使用将其传递给模块外部</p> <p>所以，在<code>NodeJS</code>中，用<code>var</code>声明的变量并不属于全局的变量，只在当前模块生效</p> <p>像上述的<code>global</code>全局对象则在全局作用域中，任何全局变量、函数、对象都是该对象的一个属性值</p> <h3 id="二、有哪些"><a href="#二、有哪些" class="header-anchor">#</a> 二、有哪些</h3> <p>将全局对象分成两类：</p> <ul><li>真正的全局对象</li> <li>模块级别的全局变量</li></ul> <h3 id="真正的全局对象"><a href="#真正的全局对象" class="header-anchor">#</a> 真正的全局对象</h3> <p>下面给出一些常见的全局对象：</p> <ul><li>Class:Buffer</li> <li>process</li> <li>console</li> <li>clearInterval、setInterval</li> <li>clearTimeout、setTimeout</li> <li>global</li></ul> <h4 id="class-buffer"><a href="#class-buffer" class="header-anchor">#</a> Class:Buffer</h4> <p>可以处理二进制以及非<code>Unicode</code>编码的数据</p> <p>在<code>Buffer</code>类实例化中存储了原始数据。<code>Buffer</code>类似于一个整数数组，在 V8 堆原始存储空间给它分配了内存</p> <p>一旦创建了<code>Buffer</code>实例，则无法改变大小</p> <h4 id="process"><a href="#process" class="header-anchor">#</a> process</h4> <p>进程对象，提供有关当前进程的信息和控制</p> <p>包括在执行<code>node</code>程序进程时，如果需要传递参数，我们想要获取这个参数需要在<code>process</code>内置对象中</p> <p>启动进程：</p> <div class="language-cmd extra-class"><pre class="language-text"><code> node index.js 参数1 参数2 参数3
</code></pre></div><p>index.js 文件如下：</p> <div class="language-js extra-class"><pre class="language-js"><code>process<span class="token punctuation">.</span>argv<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">val<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>index<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>val<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>输出如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">;</span><span class="token operator">/</span>usr<span class="token operator">/</span>acllo <span class="token operator">/</span> bin <span class="token operator">/</span> node <span class="token operator">/</span> Users <span class="token operator">/</span> mjr <span class="token operator">/</span> work <span class="token operator">/</span> node <span class="token operator">/</span> process <span class="token operator">-</span> args<span class="token punctuation">.</span>js
参数<span class="token number">1</span>
参数<span class="token number">2</span>
参数<span class="token number">3</span>
</code></pre></div><p>除此之外，还包括一些其他信息如版本、操作系统等</p> <p><img src="https://static.vue-js.com/85f473a0-c2a3-11eb-ab90-d9ae814b240d.png" alt=""></p> <h4 id="console"><a href="#console" class="header-anchor">#</a> console</h4> <p>用来打印<code>stdout</code>和<code>stderr</code></p> <p>最常用的输入内容的方式：console.log</p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">)</span>
</code></pre></div><p>清空控制台：console.clear</p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span>clear
</code></pre></div><p>打印函数的调用栈：console.trace</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">demo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">demo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">trace</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p><img src="https://static.vue-js.com/91b6dbb0-c2a3-11eb-85f6-6fac77c0c9b3.png" alt=""></p> <h4 id="clearinterval、setinterval"><a href="#clearinterval、setinterval" class="header-anchor">#</a> clearInterval、setInterval</h4> <p>设置定时器与清除定时器</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">setInterval</span><span class="token punctuation">(</span>callback<span class="token punctuation">,</span> delay<span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p><code>callback</code>每<code>delay</code>毫秒重复执行一次</p> <p><code>clearInterval</code>则为对应发取消定时器的方法</p> <h4 id="cleartimeout、settimeout"><a href="#cleartimeout、settimeout" class="header-anchor">#</a> clearTimeout、setTimeout</h4> <p>设置延时器与清除延时器</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">setTimeout</span><span class="token punctuation">(</span>callback<span class="token punctuation">,</span>delay<span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token operator">...</span>args<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p><code>callback</code>在<code>delay</code>毫秒后执行一次</p> <p><code>clearTimeout</code>则为对应取消延时器的方法</p> <h4 id="global"><a href="#global" class="header-anchor">#</a> global</h4> <p>全局命名空间对象，墙面讲到的<code>process</code>、<code>console</code>、<code>setTimeout</code>等都有放到<code>global</code>中</p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>process <span class="token operator">===</span> global<span class="token punctuation">.</span>process<span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre></div><h3 id="模块级别的全局对象"><a href="#模块级别的全局对象" class="header-anchor">#</a> 模块级别的全局对象</h3> <p>这些全局对象是模块中的变量，只是每个模块都有，看起来就像全局变量，像在命令交互中是不可以使用，包括：</p> <ul><li>__dirname</li> <li>__filename</li> <li>exports</li> <li>module</li> <li>require</li></ul> <h4 id="dirname"><a href="#dirname" class="header-anchor">#</a> __dirname</h4> <p>获取当前文件所在的路径，不包括后面的文件名</p> <p>从 <code>/Users/mjr</code> 运行 <code>node example.js</code>：</p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">)</span>
<span class="token comment">// 打印: /Users/mjr</span>
</code></pre></div><h4 id="filename"><a href="#filename" class="header-anchor">#</a> __filename</h4> <p>获取当前文件所在的路径和文件名称，包括后面的文件名称</p> <p>从 <code>/Users/mjr</code> 运行 <code>node example.js</code>：</p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>__filename<span class="token punctuation">)</span>
<span class="token comment">// 打印: /Users/mjr/example.js</span>
</code></pre></div><h4 id="exports"><a href="#exports" class="header-anchor">#</a> exports</h4> <p><code>module.exports</code> 用于指定一个模块所导出的内容，即可以通过 <code>require()</code> 访问的内容</p> <div class="language-js extra-class"><pre class="language-js"><code>exports<span class="token punctuation">.</span>name <span class="token operator">=</span> name
exports<span class="token punctuation">.</span>age <span class="token operator">=</span> age
exports<span class="token punctuation">.</span>sayHello <span class="token operator">=</span> sayHello
</code></pre></div><h4 id="module"><a href="#module" class="header-anchor">#</a> module</h4> <p>对当前模块的引用，通过<code>module.exports</code> 用于指定一个模块所导出的内容，即可以通过 <code>require()</code> 访问的内容</p> <h4 id="require"><a href="#require" class="header-anchor">#</a> require</h4> <p>用于引入模块、 <code>JSON</code>、或本地文件。 可以从 <code>node_modules</code> 引入模块。</p> <p>可以使用相对路径引入本地模块或<code>JSON</code>文件，路径会根据<code>__dirname</code>定义的目录名或当前工作目录进行处理</p> <h3 id="参考文献-2"><a href="#参考文献-2" class="header-anchor">#</a> 参考文献</h3> <ul><li>http://nodejs.cn/api/globals.html</li></ul> <h2 id="对-node-中的-process-的理解-有哪些常用方法"><a href="#对-node-中的-process-的理解-有哪些常用方法" class="header-anchor">#</a> 对 Node 中的 process 的理解？有哪些常用方法？</h2> <h3 id="一、是什么-3"><a href="#一、是什么-3" class="header-anchor">#</a> 一、是什么</h3> <p><code>process</code> 对象是一个全局变量，提供了有关当前 <code>Node.js</code>进程的信息并对其进行控制，作为一个全局变量</p> <p>我们都知道，进程计算机系统进行资源分配和调度的基本单位，是操作系统结构的基础，是线程的容器</p> <p>当我们启动一个<code>js</code>文件，实际就是开启了一个服务进程，每个进程都拥有自己的独立空间地址、数据栈，像另一个进程无法访问当前进程的变量、数据结构，只有数据通信后，进程之间才可以数据共享</p> <p>由于<code>JavaScript</code>是一个单线程语言，所以通过<code>node xxx</code>启动一个文件后，只有一条主线程</p> <h3 id="二、属性与方法"><a href="#二、属性与方法" class="header-anchor">#</a> 二、属性与方法</h3> <p>关于<code>process</code>常见的属性有如下：</p> <ul><li>process.env：环境变量，例如通过 `process.env.NODE_ENV 获取不同环境项目配置信息</li> <li>process.nextTick：这个在谈及 <code>EventLoop</code> 时经常为会提到</li> <li>process.pid：获取当前进程 id</li> <li>process.ppid：当前进程对应的父进程</li> <li>process.cwd()：获取当前进程工作目录，</li> <li>process.platform：获取当前进程运行的操作系统平台</li> <li>process.uptime()：当前进程已运行时间，例如：pm2 守护进程的 uptime 值</li> <li>进程事件： process.on(‘uncaughtException’,cb) 捕获异常信息、 process.on(‘exit’,cb）进程推出监听</li> <li>三个标准流： process.stdout 标准输出、 process.stdin 标准输入、 process.stderr 标准错误输出</li> <li>process.title 指定进程名称，有的时候需要给进程指定一个名称</li></ul> <p>下面再稍微介绍下某些方法的使用：</p> <p><strong>process.cwd()</strong></p> <p>返回当前 <code>Node</code>进程执行的目录</p> <p>一个<code>Node</code> 模块 <code>A</code> 通过 NPM 发布，项目 <code>B</code> 中使用了模块 <code>A</code>。在 <code>A</code> 中需要操作 <code>B</code> 项目下的文件时，就可以用 <code>process.cwd()</code> 来获取 <code>B</code> 项目的路径</p> <p><strong>process.argv</strong></p> <p>在终端通过 Node 执行命令的时候，通过 <code>process.argv</code> 可以获取传入的命令行参数，返回值是一个数组：</p> <ul><li>0: Node 路径（一般用不到，直接忽略）</li> <li>1: 被执行的 JS 文件路径（一般用不到，直接忽略）</li> <li>2~n: 真实传入命令的参数</li></ul> <p>所以，我们只要从 <code>process.argv[2]</code> 开始获取就好了</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> args <span class="token operator">=</span> process<span class="token punctuation">.</span>argv<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>process.env</strong></p> <p>返回一个对象，存储当前环境相关的所有信息，一般很少直接用到。</p> <p>一般我们会在 <code>process.env</code> 上挂载一些变量标识当前的环境。比如最常见的用 <code>process.env.NODE_ENV</code> 区分 <code>development</code> 和 <code>production</code></p> <p>在 <code>vue-cli</code> 的源码中也经常会看到 <code>process.env.VUE_CLI_DEBUG</code> 标识当前是不是 <code>DEBUG</code> 模式</p> <p><strong>process.nextTick()</strong></p> <p>我们知道<code>NodeJs</code>是基于事件轮询，在这个过程中，同一时间只会处理一件事情</p> <p>在这种处理模式下，<code>process.nextTick()</code>就是定义出一个动作，并且让这个动作在下一个事件轮询的时间点上执行</p> <p>例如下面例子将一个<code>foo</code>函数在下一个时间点调用</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

process<span class="token punctuation">.</span><span class="token function">nextTick</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">)</span>
</code></pre></div><p>输出结果为<code>bar</code>、<code>foo</code></p> <p>虽然下述方式也能实现同样效果：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">setTimeout</span><span class="token punctuation">(</span>foo<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">)</span>
</code></pre></div><p>两者区别在于：</p> <ul><li>process.nextTick()会在这一次 event loop 的 call stack 清空后（下一次 event loop 开始前）再调用 callback</li> <li>setTimeout()是并不知道什么时候 call stack 清空的，所以何时调用 callback 函数是不确定的</li></ul> <h3 id="参考文献-3"><a href="#参考文献-3" class="header-anchor">#</a> 参考文献</h3> <ul><li>http://nodejs.cn/api/process.html</li></ul> <h2 id="对-node-中的-fs-模块的理解-有哪些常用方法"><a href="#对-node-中的-fs-模块的理解-有哪些常用方法" class="header-anchor">#</a> 对 Node 中的 fs 模块的理解? 有哪些常用方法</h2> <h3 id="一、是什么-4"><a href="#一、是什么-4" class="header-anchor">#</a> 一、是什么</h3> <p>fs（filesystem），该模块提供本地文件的读写能力，基本上是<code>POSIX</code>文件操作命令的简单包装</p> <p>可以说，所有与文件的操作都是通过<code>fs</code>核心模块实现</p> <p>导入模块如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>
</code></pre></div><p>这个模块对所有文件系统操作提供异步（不具有<code>sync</code> 后缀）和同步（具有 <code>sync</code> 后缀）两种操作方式，而供开发者选择</p> <h3 id="二、文件知识"><a href="#二、文件知识" class="header-anchor">#</a> 二、文件知识</h3> <p>在计算机中有关于文件的知识：</p> <ul><li>权限位 mode</li> <li>标识位 flag</li> <li>文件描述为 fd</li></ul> <p><strong>权限位 mode</strong></p> <p><img src="https://static.vue-js.com/4f4d41a0-c46b-11eb-ab90-d9ae814b240d.png" alt=""></p> <p>针对文件所有者、文件所属组、其他用户进行权限分配，其中类型又分成读、写和执行，具备权限位 4、2、1，不具备权限为 0</p> <p>如在<code>linux</code>查看文件权限位：</p> <div class="language-js extra-class"><pre class="language-js"><code>drwxr<span class="token operator">-</span>xr<span class="token operator">-</span>x <span class="token number">1</span> PandaShen <span class="token number">197121</span> <span class="token number">0</span> Jun <span class="token number">28</span> <span class="token number">14</span><span class="token operator">:</span><span class="token number">41</span> core
<span class="token operator">-</span>rw<span class="token operator">-</span>r<span class="token operator">--</span>r<span class="token operator">--</span> <span class="token number">1</span> PandaShen <span class="token number">197121</span> <span class="token number">293</span> Jun <span class="token number">23</span> <span class="token number">17</span><span class="token operator">:</span><span class="token number">44</span> index<span class="token punctuation">.</span>md
</code></pre></div><p>在开头前十位中，<code>d</code>为文件夹，<code>-</code>为文件，后九位就代表当前用户、用户所属组和其他用户的权限位，按每三位划分，分别代表读（r）、写（w）和执行（x），- 代表没有当前位对应的权限</p> <p><strong>标识位</strong></p> <p>标识位代表着对文件的操作方式，如可读、可写、即可读又可写等等，如下表所示：</p> <table><thead><tr><th>符号</th> <th>含义</th></tr></thead> <tbody><tr><td>r</td> <td>读取文件，如果文件不存在则抛出异常。</td></tr> <tr><td>r+</td> <td>读取并写入文件，如果文件不存在则抛出异常。</td></tr> <tr><td>rs</td> <td>读取并写入文件，指示操作系统绕开本地文件系统缓存。</td></tr> <tr><td>w</td> <td>写入文件，文件不存在会被创建，存在则清空后写入。</td></tr> <tr><td>wx</td> <td>写入文件，排它方式打开。</td></tr> <tr><td>w+</td> <td>读取并写入文件，文件不存在则创建文件，存在则清空后写入。</td></tr> <tr><td>wx+</td> <td>和 w+ 类似，排他方式打开。</td></tr> <tr><td>a</td> <td>追加写入，文件不存在则创建文件。</td></tr> <tr><td>ax</td> <td>与 a 类似，排他方式打开。</td></tr> <tr><td>a+</td> <td>读取并追加写入，不存在则创建。</td></tr> <tr><td>ax+</td> <td>与 a+ 类似，排他方式打开。</td></tr></tbody></table> <p><strong>文件描述为 fd</strong></p> <p>操作系统会为每个打开的文件分配一个名为文件描述符的数值标识，文件操作使用这些文件描述符来识别与追踪每个特定的文件</p> <p><code>Window</code>系统使用了一个不同但概念类似的机制来追踪资源，为方便用户，<code>NodeJS</code>抽象了不同操作系统间的差异，为所有打开的文件分配了数值的文件描述符</p> <p>在 <code>NodeJS</code>中，每操作一个文件，文件描述符是递增的，文件描述符一般从 <code>3</code> 开始，因为前面有 <code>0</code>、<code>1</code>、<code>2</code>三个比较特殊的描述符，分别代表 <code>process.stdin</code>（标准输入）、<code>process.stdout</code>（标准输出）和 <code>process.stderr</code>（错误输出）</p> <h3 id="三、方法"><a href="#三、方法" class="header-anchor">#</a> 三、方法</h3> <p>下面针对<code>fs</code>模块常用的方法进行展开：</p> <ul><li>文件读取</li> <li>文件写入</li> <li>文件追加写入</li> <li>文件拷贝</li> <li>创建目录</li></ul> <h3 id="文件读取"><a href="#文件读取" class="header-anchor">#</a> 文件读取</h3> <h4 id="fs-readfilesync"><a href="#fs-readfilesync" class="header-anchor">#</a> fs.readFileSync</h4> <p>同步读取，参数如下：</p> <ul><li>第一个参数为读取文件的路径或文件描述符</li> <li>第二个参数为 options，默认值为 null，其中有 encoding（编码，默认为 null）和 flag（标识位，默认为 r），也可直接传入 encoding</li></ul> <p>结果为返回文件的内容</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> buf <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">'1.txt'</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> data <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">'1.txt'</span><span class="token punctuation">,</span> <span class="token string">'utf8'</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span> <span class="token comment">// &lt;Buffer 48 65 6c 6c 6f&gt;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token comment">// Hello</span>
</code></pre></div><h4 id="fs-readfile"><a href="#fs-readfile" class="header-anchor">#</a> fs.readFile</h4> <p>异步读取方法 <code>readFile</code> 与 <code>readFileSync</code> 的前两个参数相同，最后一个参数为回调函数，函数内有两个参数 <code>err</code>（错误）和 <code>data</code>（数据），该方法没有返回值，回调函数在读取文件成功后执行</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>

fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'1.txt'</span><span class="token punctuation">,</span> <span class="token string">'utf8'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token comment">// Hello</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="文件写入"><a href="#文件写入" class="header-anchor">#</a> 文件写入</h3> <h4 id="writefilesync"><a href="#writefilesync" class="header-anchor">#</a> writeFileSync</h4> <p>同步写入，有三个参数：</p> <ul><li><p>第一个参数为写入文件的路径或文件描述符</p></li> <li><p>第二个参数为写入的数据，类型为 String 或 Buffer</p></li> <li><p>第三个参数为 options，默认值为 null，其中有 encoding（编码，默认为 utf8）、 flag（标识位，默认为 w）和 mode（权限位，默认为 0o666），也可直接传入 encoding</p></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>

fs<span class="token punctuation">.</span><span class="token function">writeFileSync</span><span class="token punctuation">(</span><span class="token string">'2.txt'</span><span class="token punctuation">,</span> <span class="token string">'Hello world'</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> data <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">'2.txt'</span><span class="token punctuation">,</span> <span class="token string">'utf8'</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token comment">// Hello world</span>
</code></pre></div><h4 id="writefile"><a href="#writefile" class="header-anchor">#</a> writeFile</h4> <p>异步写入，<code>writeFile</code> 与 <code>writeFileSync</code> 的前三个参数相同，最后一个参数为回调函数，函数内有一个参数 <code>err</code>（错误），回调函数在文件写入数据成功后执行</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>

fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token string">'2.txt'</span><span class="token punctuation">,</span> <span class="token string">'Hello world'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'2.txt'</span><span class="token punctuation">,</span> <span class="token string">'utf8'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token comment">// Hello world</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="文件追加写入"><a href="#文件追加写入" class="header-anchor">#</a> 文件追加写入</h3> <h4 id="appendfilesync"><a href="#appendfilesync" class="header-anchor">#</a> appendFileSync</h4> <p>参数如下：</p> <ul><li>第一个参数为写入文件的路径或文件描述符</li> <li>第二个参数为写入的数据，类型为 String 或 Buffer</li> <li>第三个参数为 options，默认值为 null，其中有 encoding（编码，默认为 utf8）、 flag（标识位，默认为 a）和 mode（权限位，默认为 0o666），也可直接传入 encoding</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>

fs<span class="token punctuation">.</span><span class="token function">appendFileSync</span><span class="token punctuation">(</span><span class="token string">'3.txt'</span><span class="token punctuation">,</span> <span class="token string">' world'</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> data <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">'3.txt'</span><span class="token punctuation">,</span> <span class="token string">'utf8'</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="appendfile"><a href="#appendfile" class="header-anchor">#</a> appendFile</h4> <p>异步追加写入方法 <code>appendFile</code> 与 <code>appendFileSync</code> 的前三个参数相同，最后一个参数为回调函数，函数内有一个参数 <code>err</code>（错误），回调函数在文件追加写入数据成功后执行</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>

fs<span class="token punctuation">.</span><span class="token function">appendFile</span><span class="token punctuation">(</span><span class="token string">'3.txt'</span><span class="token punctuation">,</span> <span class="token string">' world'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'3.txt'</span><span class="token punctuation">,</span> <span class="token string">'utf8'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token comment">// Hello world</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="文件拷贝"><a href="#文件拷贝" class="header-anchor">#</a> 文件拷贝</h3> <h4 id="copyfilesync"><a href="#copyfilesync" class="header-anchor">#</a> copyFileSync</h4> <p>同步拷贝</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>

fs<span class="token punctuation">.</span><span class="token function">copyFileSync</span><span class="token punctuation">(</span><span class="token string">'3.txt'</span><span class="token punctuation">,</span> <span class="token string">'4.txt'</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> data <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">'4.txt'</span><span class="token punctuation">,</span> <span class="token string">'utf8'</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token comment">// Hello world</span>
</code></pre></div><h4 id="copyfile"><a href="#copyfile" class="header-anchor">#</a> copyFile</h4> <p>异步拷贝</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>

fs<span class="token punctuation">.</span><span class="token function">copyFile</span><span class="token punctuation">(</span><span class="token string">'3.txt'</span><span class="token punctuation">,</span> <span class="token string">'4.txt'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'4.txt'</span><span class="token punctuation">,</span> <span class="token string">'utf8'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token comment">// Hello world</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="创建目录"><a href="#创建目录" class="header-anchor">#</a> 创建目录</h3> <h4 id="mkdirsync"><a href="#mkdirsync" class="header-anchor">#</a> mkdirSync</h4> <p>同步创建，参数为一个目录的路径，没有返回值，在创建目录的过程中，必须保证传入的路径前面的文件目录都存在，否则会抛出异常</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 假设已经有了 a 文件夹和 a 下的 b 文件夹</span>
fs<span class="token punctuation">.</span><span class="token function">mkdirSync</span><span class="token punctuation">(</span><span class="token string">'a/b/c'</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="mkdir"><a href="#mkdir" class="header-anchor">#</a> mkdir</h4> <p>异步创建，第二个参数为回调函数</p> <div class="language-js extra-class"><pre class="language-js"><code>fs<span class="token punctuation">.</span><span class="token function">mkdir</span><span class="token punctuation">(</span><span class="token string">'a/b/c'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'创建成功'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="参考文献-4"><a href="#参考文献-4" class="header-anchor">#</a> 参考文献</h3> <ul><li>http://nodejs.cn/api/fs.html</li> <li>https://segmentfault.com/a/1190000019913303</li></ul> <h2 id="对-node-中的-buffer-的理解-应用场景"><a href="#对-node-中的-buffer-的理解-应用场景" class="header-anchor">#</a> 对 Node 中的 Buffer 的理解？应用场景？</h2> <h2 id="对-node-中的-stream-的理解-应用场景"><a href="#对-node-中的-stream-的理解-应用场景" class="header-anchor">#</a> 对 Node 中的 Stream 的理解？应用场景？</h2> <h2 id="说说-node-中的-eventemitter-如何实现一个-eventemitter"><a href="#说说-node-中的-eventemitter-如何实现一个-eventemitter" class="header-anchor">#</a> 说说 Node 中的 EventEmitter? 如何实现一个 EventEmitter?</h2> <h2 id="说说对-nodejs-中的事件循环机制理解"><a href="#说说对-nodejs-中的事件循环机制理解" class="header-anchor">#</a> 说说对 Nodejs 中的事件循环机制理解?</h2> <h3 id="一、是什么-5"><a href="#一、是什么-5" class="header-anchor">#</a> 一、是什么</h3> <p>在<a href="https://github.com/febobo/web-interview/issues/73" target="_blank" rel="noopener noreferrer">浏览器事件循环<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>中，我们了解到<code>javascript</code>在浏览器中的事件循环机制，其是根据<code>HTML5</code>定义的规范来实现</p> <p>而在<code>NodeJS</code>中，事件循环是基于<code>libuv</code>实现，<code>libuv</code>是一个多平台的专注于异步 IO 的库，如下图最右侧所示：</p> <p><img src="https://static.vue-js.com/ea690b90-c90e-11eb-85f6-6fac77c0c9b3.png" alt=""></p> <p>上图<code>EVENT_QUEUE</code> 给人看起来只有一个队列，但<code>EventLoop</code>存在 6 个阶段，每个阶段都有对应的一个先进先出的回调队列</p> <h3 id="二、流程"><a href="#二、流程" class="header-anchor">#</a> 二、流程</h3> <p>上节讲到事件循环分成了六个阶段，对应如下：</p> <p><img src="https://static.vue-js.com/f2e34d80-c90e-11eb-ab90-d9ae814b240d.png" alt=""></p> <ul><li>timers 阶段：这个阶段执行 timer（setTimeout、setInterval）的回调</li> <li>定时器检测阶段(timers)：本阶段执行 timer 的回调，即 setTimeout、setInterval 里面的回调函数</li> <li>I/O 事件回调阶段(I/O callbacks)：执行延迟到下一个循环迭代的 I/O 回调，即上一轮循环中未被执行的一些 I/O 回调</li> <li>闲置阶段(idle, prepare)：仅系统内部使用</li> <li>轮询阶段(poll)：检索新的 I/O 事件;执行与 I/O 相关的回调（几乎所有情况下，除了关闭的回调函数，那些由计时器和 setImmediate() 调度的之外），其余情况 node 将在适当的时候在此阻塞</li> <li>检查阶段(check)：setImmediate() 回调函数在这里执行</li> <li>关闭事件回调阶段(close callback)：一些关闭的回调函数，如：socket.on('close', ...)</li></ul> <p>每个阶段对应一个队列，当事件循环进入某个阶段时, 将会在该阶段内执行回调，直到队列耗尽或者回调的最大数量已执行, 那么将进入下一个处理阶段</p> <p>除了上述 6 个阶段，还存在<code>process.nextTick</code>，其不属于事件循环的任何一个阶段，它属于该阶段与下阶段之间的过渡, 即本阶段执行结束, 进入下一个阶段前, 所要执行的回调，类似插队</p> <p>流程图如下所示：</p> <p><img src="https://static.vue-js.com/fbe731d0-c90e-11eb-ab90-d9ae814b240d.png" alt=""></p> <p>在<code>Node</code>中，同样存在宏任务和微任务，与浏览器中的事件循环相似</p> <p>微任务对应有：</p> <ul><li>next tick queue：process.nextTick</li> <li>other queue：Promise 的 then 回调、queueMicrotask</li></ul> <p>宏任务对应有：</p> <ul><li>timer queue：setTimeout、setInterval</li> <li>poll queue：IO 事件</li> <li>check queue：setImmediate</li> <li>close queue：close 事件</li></ul> <p>其执行顺序为：</p> <ul><li>next tick microtask queue</li> <li>other microtask queue</li> <li>timer queue</li> <li>poll queue</li> <li>check queue</li> <li>close queue</li></ul> <h3 id="三、题目"><a href="#三、题目" class="header-anchor">#</a> 三、题目</h3> <p>通过上面的学习，下面开始看看题目</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">async1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'async1 start'</span><span class="token punctuation">)</span>
  <span class="token keyword">await</span> <span class="token function">async2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'async1 end'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">async2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'async2'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'script start'</span><span class="token punctuation">)</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'setTimeout0'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'setTimeout2'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span>

<span class="token function">setImmediate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'setImmediate'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

process<span class="token punctuation">.</span><span class="token function">nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'nextTick1'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token function">async1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

process<span class="token punctuation">.</span><span class="token function">nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'nextTick2'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'promise1'</span><span class="token punctuation">)</span>
  <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'promise2'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'promise3'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'script end'</span><span class="token punctuation">)</span>
</code></pre></div><p>分析过程：</p> <ul><li><p>先找到同步任务，输出 script start</p></li> <li><p>遇到第一个 setTimeout，将里面的回调函数放到 timer 队列中</p></li> <li><p>遇到第二个 setTimeout，300ms 后将里面的回调函数放到 timer 队列中</p></li> <li><p>遇到第一个 setImmediate，将里面的回调函数放到 check 队列中</p></li> <li><p>遇到第一个 nextTick，将其里面的回调函数放到本轮同步任务执行完毕后执行</p></li> <li><p>执行 async1 函数，输出 async1 start</p></li> <li><p>执行 async2 函数，输出 async2，async2 后面的输出 async1 end 进入微任务，等待下一轮的事件循环</p></li> <li><p>遇到第二个，将其里面的回调函数放到本轮同步任务执行完毕后执行</p></li> <li><p>遇到 new Promise，执行里面的立即执行函数，输出 promise1、promise2</p></li> <li><p>then 里面的回调函数进入微任务队列</p></li> <li><p>遇到同步任务，输出 script end</p></li> <li><p>执行下一轮回到函数，先依次输出 nextTick 的函数，分别是 nextTick1、nextTick2</p></li> <li><p>然后执行微任务队列，依次输出 async1 end、promise3</p></li> <li><p>执行 timer 队列，依次输出 setTimeout0</p></li> <li><p>接着执行 check 队列，依次输出 setImmediate</p></li> <li><p>300ms 后，timer 队列存在任务，执行输出 setTimeout2</p></li></ul> <p>执行结果如下：</p> <div class="language- extra-class"><pre class="language-text"><code>script start
async1 start
async2
promise1
promise2
script end
nextTick1
nextTick2
async1 end
promise3
setTimeout0
setImmediate
setTimeout2
</code></pre></div><p>最后有一道是关于<code>setTimeout</code>与<code>setImmediate</code>的输出顺序</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'setTimeout'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>

<span class="token function">setImmediate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'setImmediate'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>输出情况如下：</p> <div class="language-js extra-class"><pre class="language-js"><code>情况一：
setTimeout
setImmediate

情况二：
setImmediate
setTimeout
</code></pre></div><p>分析下流程：</p> <ul><li>外层同步代码一次性全部执行完，遇到异步 API 就塞到对应的阶段</li> <li>遇到<code>setTimeout</code>，虽然设置的是 0 毫秒触发，但实际上会被强制改成 1ms，时间到了然后塞入<code>times</code>阶段</li> <li>遇到<code>setImmediate</code>塞入<code>check</code>阶段</li> <li>同步代码执行完毕，进入 Event Loop</li> <li>先进入<code>times</code>阶段，检查当前时间过去了 1 毫秒没有，如果过了 1 毫秒，满足<code>setTimeout</code>条件，执行回调，如果没过 1 毫秒，跳过</li> <li>跳过空的阶段，进入 check 阶段，执行<code>setImmediate</code>回调</li></ul> <p>这里的关键在于这 1ms，如果同步代码执行时间较长，进入<code>Event Loop</code>的时候 1 毫秒已经过了，<code>setTimeout</code>先执行，如果 1 毫秒还没到，就先执行了<code>setImmediate</code></p> <h3 id="参考文献-5"><a href="#参考文献-5" class="header-anchor">#</a> 参考文献</h3> <ul><li>https://segmentfault.com/a/1190000012258592</li> <li>https://juejin.cn/post/6844904100195205133</li></ul> <h2 id="说-node-文件查找的优先级以及-require-方法的文件查找策略"><a href="#说-node-文件查找的优先级以及-require-方法的文件查找策略" class="header-anchor">#</a> 说 Node 文件查找的优先级以及 Require 方法的文件查找策略?</h2> <h2 id="说说对中间件概念的理解-如何封装-node-中间件"><a href="#说说对中间件概念的理解-如何封装-node-中间件" class="header-anchor">#</a> 说说对中间件概念的理解，如何封装 node 中间件？</h2> <h2 id="如何实现-jwt-鉴权机制-说说你的思路"><a href="#如何实现-jwt-鉴权机制-说说你的思路" class="header-anchor">#</a> 如何实现 jwt 鉴权机制？说说你的思路</h2> <h3 id="一、是什么-6"><a href="#一、是什么-6" class="header-anchor">#</a> 一、是什么</h3> <p>JWT（JSON Web Token），本质就是一个字符串书写规范，如下图，作用是用来在用户和服务器之间传递安全可靠的信息</p> <p><img src="https://static.vue-js.com/052904c0-cd89-11eb-ab90-d9ae814b240d.png" alt=""></p> <p>在目前前后端分离的开发过程中，使用<code>token</code>鉴权机制用于身份验证是最常见的方案，流程如下：</p> <ul><li>服务器当验证用户账号和密码正确的时候，给用户颁发一个令牌，这个令牌作为后续用户访问一些接口的凭证</li> <li>后续访问会根据这个令牌判断用户时候有权限进行访问</li></ul> <p><code>Token</code>，分成了三部分，头部（Header）、载荷（Payload）、签名（Signature），并以<code>.</code>进行拼接。其中头部和载荷都是以<code>JSON</code>格式存放数据，只是进行了编码</p> <p><img src="https://static.vue-js.com/1175f990-cd89-11eb-85f6-6fac77c0c9b3.png" alt=""></p> <h3 id="header"><a href="#header" class="header-anchor">#</a> header</h3> <p>每个 JWT 都会带有头部信息，这里主要声明使用的算法。声明算法的字段名为<code>alg</code>，同时还有一个<code>typ</code>的字段，默认<code>JWT</code>即可。以下示例中算法为 HS256</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span> <span class="token property">&quot;alg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;HS256&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;typ&quot;</span><span class="token operator">:</span> <span class="token string">&quot;JWT&quot;</span> <span class="token punctuation">}</span>
</code></pre></div><p>因为 JWT 是字符串，所以我们还需要对以上内容进行 Base64 编码，编码后字符串如下：</p> <div class="language-tex extra-class"><pre class="language-tex"><code>eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9
</code></pre></div><h3 id="payload"><a href="#payload" class="header-anchor">#</a> payload</h3> <p>载荷即消息体，这里会存放实际的内容，也就是<code>Token</code>的数据声明，例如用户的<code>id</code>和<code>name</code>，默认情况下也会携带令牌的签发时间<code>iat</code>，通过还可以设置过期时间，如下：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;sub&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1234567890&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;John Doe&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;iat&quot;</span><span class="token operator">:</span> <span class="token number">1516239022</span>
<span class="token punctuation">}</span>
</code></pre></div><p>同样进行 Base64 编码后，字符串如下：</p> <div class="language-tex extra-class"><pre class="language-tex"><code>eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ
</code></pre></div><h3 id="signature"><a href="#signature" class="header-anchor">#</a> Signature</h3> <p>签名是对头部和载荷内容进行签名，一般情况，设置一个<code>secretKey</code>，对前两个的结果进行<code>HMACSHA25</code>算法，公式如下：</p> <div class="language-js extra-class"><pre class="language-js"><code>Signature <span class="token operator">=</span> <span class="token constant">HMACSHA256</span><span class="token punctuation">(</span><span class="token function">base64Url</span><span class="token punctuation">(</span>header<span class="token punctuation">)</span><span class="token operator">+</span><span class="token punctuation">.</span><span class="token operator">+</span><span class="token function">base64Url</span><span class="token punctuation">(</span>payload<span class="token punctuation">)</span><span class="token punctuation">,</span>secretKey<span class="token punctuation">)</span>
</code></pre></div><p>一旦前面两部分数据被篡改，只要服务器加密用的密钥没有泄露，得到的签名肯定和之前的签名不一致</p> <h3 id="二、如何实现"><a href="#二、如何实现" class="header-anchor">#</a> 二、如何实现</h3> <p><code>Token</code>的使用分成了两部分：</p> <ul><li>生成 token：登录成功的时候，颁发 token</li> <li>验证 token：访问某些资源或者接口时，验证 token</li></ul> <h3 id="生成-token"><a href="#生成-token" class="header-anchor">#</a> 生成 token</h3> <p>借助第三方库<code>jsonwebtoken</code>，通过<code>jsonwebtoken</code> 的 <code>sign</code> 方法生成一个 <code>token</code>：</p> <ul><li><p>第一个参数指的是 Payload</p></li> <li><p>第二个是秘钥，服务端特有</p></li> <li><p>第三个参数是 option，可以定义 token 过期时间</p></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> crypto <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'crypto'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  jwt <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'jsonwebtoken'</span><span class="token punctuation">)</span>
<span class="token comment">// TODO:使用数据库</span>
<span class="token comment">// 这里应该是用数据库存储，这里只是演示用</span>
<span class="token keyword">let</span> userList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

<span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{</span>
  <span class="token comment">// 用户登录</span>
  <span class="token keyword">static</span> <span class="token keyword">async</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token parameter">ctx</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> data <span class="token operator">=</span> ctx<span class="token punctuation">.</span>request<span class="token punctuation">.</span>body
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>data<span class="token punctuation">.</span>name <span class="token operator">||</span> <span class="token operator">!</span>data<span class="token punctuation">.</span>password<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>body <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token string">'000002'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'参数不合法'</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> result <span class="token operator">=</span> userList<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>
      <span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
        item<span class="token punctuation">.</span>name <span class="token operator">===</span> data<span class="token punctuation">.</span>name <span class="token operator">&amp;&amp;</span> item<span class="token punctuation">.</span>password <span class="token operator">===</span> crypto<span class="token punctuation">.</span><span class="token function">createHash</span><span class="token punctuation">(</span><span class="token string">'md5'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>password<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">digest</span><span class="token punctuation">(</span><span class="token string">'hex'</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 生成token</span>
      <span class="token keyword">const</span> token <span class="token operator">=</span> jwt<span class="token punctuation">.</span><span class="token function">sign</span><span class="token punctuation">(</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">name</span><span class="token operator">:</span> result<span class="token punctuation">.</span>name
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">'test_token'</span><span class="token punctuation">,</span> <span class="token comment">// secret</span>
        <span class="token punctuation">{</span> <span class="token literal-property property">expiresIn</span><span class="token operator">:</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token punctuation">}</span> <span class="token comment">// 过期时间：60 * 60 s</span>
      <span class="token punctuation">)</span>
      <span class="token keyword">return</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>body <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token string">'0'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'登录成功'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          token
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>body <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token string">'000002'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'用户名或密码错误'</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> UserController
</code></pre></div><p>在前端接收到<code>token</code>后，一般情况会通过<code>localStorage</code>进行缓存，然后将<code>token</code>放到<code>HTTP</code>请求头<code>Authorization</code> 中，关于<code>Authorization</code> 的设置，前面要加上 Bearer ，注意后面带有空格</p> <div class="language-js extra-class"><pre class="language-js"><code>axios<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">config</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> token <span class="token operator">=</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'token'</span><span class="token punctuation">)</span>
  config<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>common<span class="token punctuation">[</span><span class="token string">'Authorization'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'Bearer '</span> <span class="token operator">+</span> token <span class="token comment">// 留意这里的 Authorization</span>
  <span class="token keyword">return</span> config
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="校验-token"><a href="#校验-token" class="header-anchor">#</a> 校验 token</h3> <p>使用 <code>koa-jwt</code> 中间件进行验证，方式比较简单</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">/</span> 注意：放在路由前面
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">koajwt</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">secret</span><span class="token operator">:</span> <span class="token string">'test_token'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unless</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token comment">// 配置白名单</span>
  <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\/api\/register</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\/api\/login</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>secret 必须和 sign 时候保持一致</li> <li>可以通过 unless 配置接口白名单，也就是哪些 URL 可以不用经过校验，像登陆/注册都可以不用校验</li> <li>校验的中间件需要放在需要校验的路由前面，无法对前面的 URL 进行校验</li></ul> <p>获取<code>token</code>用户的信息方法如下：</p> <div class="language-js extra-class"><pre class="language-js"><code>router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/api/userInfo'</span><span class="token punctuation">,</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span>next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">const</span> authorization <span class="token operator">=</span>  ctx<span class="token punctuation">.</span>header<span class="token punctuation">.</span>authorization <span class="token comment">// 获取jwt</span>
    <span class="token keyword">const</span> token <span class="token operator">=</span> authorization<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'Beraer '</span><span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> result <span class="token operator">=</span> jwt<span class="token punctuation">.</span><span class="token function">verify</span><span class="token punctuation">(</span>token<span class="token punctuation">,</span><span class="token string">'test_token'</span><span class="token punctuation">)</span>
    ctx<span class="token punctuation">.</span>body <span class="token operator">=</span> result
</code></pre></div><p>注意：上述的<code>HMA256</code>加密算法为单秘钥的形式，一旦泄露后果非常的危险</p> <p>在分布式系统中，每个子系统都要获取到秘钥，那么这个子系统根据该秘钥可以发布和验证令牌，但有些服务器只需要验证令牌</p> <p>这时候可以采用非对称加密，利用私钥发布令牌，公钥验证令牌，加密算法可以选择<code>RS256</code></p> <h3 id="三、优缺点"><a href="#三、优缺点" class="header-anchor">#</a> 三、优缺点</h3> <p>优点：</p> <ul><li>json 具有通用性，所以可以跨语言</li> <li>组成简单，字节占用小，便于传输</li> <li>服务端无需保存会话信息，很容易进行水平扩展</li> <li>一处生成，多处使用，可以在分布式系统中，解决单点登录问题</li> <li>可防护 CSRF 攻击</li></ul> <p>缺点：</p> <ul><li>payload 部分仅仅是进行简单编码，所以只能用于存储逻辑必需的非敏感信息</li> <li>需要保护好加密密钥，一旦泄露后果不堪设想</li> <li>为避免 token 被劫持，最好使用 https 协议</li></ul> <h3 id="参考文献-6"><a href="#参考文献-6" class="header-anchor">#</a> 参考文献</h3> <ul><li>http://www.ruanyifeng.com/blog/2018/07/json_web_token-tutorial.html</li> <li>https://blog.wangjunfeng.com/post/golang-jwt/</li></ul> <h2 id="如何实现文件上传-说说你的思路"><a href="#如何实现文件上传-说说你的思路" class="header-anchor">#</a> 如何实现文件上传？说说你的思路</h2> <h3 id="一、是什么-7"><a href="#一、是什么-7" class="header-anchor">#</a> 一、是什么</h3> <p>文件上传在日常开发中应用很广泛，我们发微博、发微信朋友圈都会用到了图片上传功能</p> <p>因为浏览器限制，浏览器不能直接操作文件系统的，需要通过浏览器所暴露出来的统一接口，由用户主动授权发起来访问文件动作，然后读取文件内容进指定内存里，最后执行提交请求操作，将内存里的文件内容数据上传到服务端，服务端解析前端传来的数据信息后存入文件里</p> <p>对于文件上传，我们需要设置请求头为<code>content-type:multipart/form-data</code></p> <blockquote><p>multipart 互联网上的混合资源，就是资源由多种元素组成，form-data 表示可以使用 HTML Forms 和 POST 方法上传文件</p></blockquote> <p>结构如下：</p> <div class="language-http extra-class"><pre class="language-http"><code><span class="token request-line"><span class="token method property">POST</span> <span class="token request-target url">/t2/upload.do</span> <span class="token http-version property">HTTP/1.1</span></span>
<span class="token header"><span class="token header-name keyword">User-Agent</span><span class="token punctuation">:</span> <span class="token header-value">SOHUWapRebot</span></span>
<span class="token header"><span class="token header-name keyword">Accept-Language</span><span class="token punctuation">:</span> <span class="token header-value">zh-cn,zh;q=0.5</span></span>
<span class="token header"><span class="token header-name keyword">Accept-Charset</span><span class="token punctuation">:</span> <span class="token header-value">GBK,utf-8;q=0.7,*;q=0.7</span></span>
<span class="token header"><span class="token header-name keyword">Connection</span><span class="token punctuation">:</span> <span class="token header-value">keep-alive</span></span>
<span class="token header"><span class="token header-name keyword">Content-Length</span><span class="token punctuation">:</span> <span class="token header-value">60408</span></span>
<span class="token header"><span class="token header-name keyword">Content-Type</span><span class="token punctuation">:</span><span class="token header-value">multipart/form-data; boundary=ZnGpDtePMx0KrHh_G0X99Yef9r8JZsRJSXC</span></span>
<span class="token header"><span class="token header-name keyword">Host</span><span class="token punctuation">:</span> <span class="token header-value">w.sohu.com</span></span>

--ZnGpDtePMx0KrHh_G0X99Yef9r8JZsRJSXC
<span class="token header"><span class="token header-name keyword">Content-Disposition</span><span class="token punctuation">:</span> <span class="token header-value">form-data; name=&quot;city&quot;</span></span>

Santa colo
--ZnGpDtePMx0KrHh_G0X99Yef9r8JZsRJSXC
<span class="token header"><span class="token header-name keyword">Content-Disposition</span><span class="token punctuation">:</span> <span class="token header-value">form-data;name=&quot;desc&quot;</span></span>
<span class="token header"><span class="token header-name keyword">Content-Type</span><span class="token punctuation">:</span> <span class="token header-value">text/plain; charset=UTF-8</span></span>
<span class="token header"><span class="token header-name keyword">Content-Transfer-Encoding</span><span class="token punctuation">:</span> <span class="token header-value">8bit</span></span>

...
--ZnGpDtePMx0KrHh_G0X99Yef9r8JZsRJSXC
<span class="token header"><span class="token header-name keyword">Content-Disposition</span><span class="token punctuation">:</span> <span class="token header-value">form-data;name=&quot;pic&quot;; filename=&quot;photo.jpg&quot;</span></span>
<span class="token header"><span class="token header-name keyword">Content-Type</span><span class="token punctuation">:</span> <span class="token header-value">application/octet-stream</span></span>
<span class="token header"><span class="token header-name keyword">Content-Transfer-Encoding</span><span class="token punctuation">:</span> <span class="token header-value">binary</span></span>

... binary data of the jpg ...
--ZnGpDtePMx0KrHh_G0X99Yef9r8JZsRJSXC--
</code></pre></div><p><code>boundary</code>表示分隔符，如果要上传多个表单项，就要使用<code>boundary</code>分割，每个表单项由<code>———XXX</code>开始，以<code>———XXX</code>结尾</p> <p>而<code>xxx</code>是即时生成的字符串，用以确保整个分隔符不会在文件或表单项的内容中出现</p> <p>每个表单项必须包含一个 <code>Content-Disposition</code> 头，其他的头信息则为可选项， 比如 <code>Content-Type</code></p> <p><code>Content-Disposition</code> 包含了 <code>type</code>和 一个名字为<code>name</code>的 <code>parameter</code>，<code>type</code> 是 <code>form-data</code>，<code>name</code>参数的值则为表单控件（也即 field）的名字，如果是文件，那么还有一个 <code>filename</code>参数，值就是文件名</p> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code>Content<span class="token operator">-</span>Disposition<span class="token operator">:</span> form<span class="token operator">-</span><span class="token keyword">data</span><span class="token punctuation">;</span> name<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">&quot;user&quot;</span></span><span class="token punctuation">;</span> filename<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">&quot;logo.png&quot;</span></span>
</code></pre></div><p>至于使用<code>multipart/form-data</code>，是因为文件是以二进制的形式存在，其作用是专门用于传输大型二进制数据，效率高</p> <h3 id="二、如何实现-2"><a href="#二、如何实现-2" class="header-anchor">#</a> 二、如何实现</h3> <p>关于文件的上传的上传，我们可以分成两步骤：</p> <ul><li>文件的上传</li> <li>文件的解析</li></ul> <h3 id="文件上传"><a href="#文件上传" class="header-anchor">#</a> 文件上传</h3> <p>传统前端文件上传的表单结构如下：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://localhost:8080/api/upload<span class="token punctuation">&quot;</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>post<span class="token punctuation">&quot;</span></span> <span class="token attr-name">enctype</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>multipart/form-data<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>file<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>file<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>file<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">multiple</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>multiple<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>提交<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><code>action</code> 就是我们的提交到的接口，<code>enctype=&quot;multipart/form-data&quot;</code> 就是指定上传文件格式，<code>input</code> 的 <code>name</code> 属性一定要等于<code>file</code></p> <h3 id="文件解析"><a href="#文件解析" class="header-anchor">#</a> 文件解析</h3> <p>在服务器中，这里采用<code>koa2</code>中间件的形式解析上传的文件数据，分别有下面两种形式：</p> <ul><li>koa-body</li> <li>koa-multer</li></ul> <h4 id="koa-body"><a href="#koa-body" class="header-anchor">#</a> koa-body</h4> <p>安装依赖</p> <div class="language-cmd extra-class"><pre class="language-text"><code>npm install koa-body
</code></pre></div><p>引入<code>koa-body</code>中间件</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> koaBody <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'koa-body'</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>
  <span class="token function">koaBody</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">multipart</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">formidable</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">maxFileSize</span><span class="token operator">:</span> <span class="token number">200</span> <span class="token operator">*</span> <span class="token number">1024</span> <span class="token operator">*</span> <span class="token number">1024</span> <span class="token comment">// 设置上传文件大小最大限制，默认2M</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</code></pre></div><p>获取上传的文件</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> file <span class="token operator">=</span> ctx<span class="token punctuation">.</span>request<span class="token punctuation">.</span>files<span class="token punctuation">.</span>file <span class="token comment">// 获取上传文件</span>
</code></pre></div><p>获取文件数据后，可以通过<code>fs</code>模块将文件保存到指定目录</p> <div class="language-js extra-class"><pre class="language-js"><code>router<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/uploadfile'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 上传单个文件</span>
  <span class="token keyword">const</span> file <span class="token operator">=</span> ctx<span class="token punctuation">.</span>request<span class="token punctuation">.</span>files<span class="token punctuation">.</span>file <span class="token comment">// 获取上传文件</span>
  <span class="token comment">// 创建可读流</span>
  <span class="token keyword">const</span> reader <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createReadStream</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>path<span class="token punctuation">)</span>
  <span class="token keyword">let</span> filePath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'public/upload/'</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>file<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
  <span class="token comment">// 创建可写流</span>
  <span class="token keyword">const</span> upStream <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createWriteStream</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span>
  <span class="token comment">// 可读流通过管道写入可写流</span>
  reader<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>upStream<span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>body <span class="token operator">=</span> <span class="token string">'上传成功！'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="koa-multer"><a href="#koa-multer" class="header-anchor">#</a> koa-multer</h4> <p>安装依赖：</p> <div class="language-cmd extra-class"><pre class="language-text"><code>npm install koa-multer
</code></pre></div><p>使用 <code>multer</code> 中间件实现文件上传</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> storage <span class="token operator">=</span> multer<span class="token punctuation">.</span><span class="token function">diskStorage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function-variable function">destination</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> file<span class="token punctuation">,</span> cb</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">cb</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">'./upload/'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">filename</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> file<span class="token punctuation">,</span> cb</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">cb</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> path<span class="token punctuation">.</span><span class="token function">extname</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>originalname<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> upload <span class="token operator">=</span> <span class="token function">multer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  storage
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> fileRouter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

fileRouter<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/upload'</span><span class="token punctuation">,</span> upload<span class="token punctuation">.</span><span class="token function">single</span><span class="token punctuation">(</span><span class="token string">'file'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>req<span class="token punctuation">.</span>file<span class="token punctuation">)</span> <span class="token comment">// 获取文件</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>fileRouter<span class="token punctuation">.</span><span class="token function">routes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="参考文献-7"><a href="#参考文献-7" class="header-anchor">#</a> 参考文献</h3> <ul><li>https://segmentfault.com/a/1190000037411957</li> <li>https://www.jianshu.com/p/29e38bcc8a1d</li></ul> <h2 id="如果让你来设计一个分页功能-你会怎么设计-前后端如何交互"><a href="#如果让你来设计一个分页功能-你会怎么设计-前后端如何交互" class="header-anchor">#</a> 如果让你来设计一个分页功能, 你会怎么设计? 前后端如何交互?</h2> <h3 id="一、是什么-8"><a href="#一、是什么-8" class="header-anchor">#</a> 一、是什么</h3> <p>在我们做数据查询的时候，如果数据量很大，比如几万条数据，放在一个页面显示的话显然不友好，这时候就需要采用分页显示的形式，如每次只显示 10 条数据</p> <p><img src="https://static.vue-js.com/6070e8c0-cf14-11eb-85f6-6fac77c0c9b3.png" alt=""></p> <p>要实现分页功能，实际上就是从结果集中显示第 1~10 条记录作为第 1 页，显示第 11~20 条记录作为第 2 页，以此类推</p> <p>因此，分页实际上就是从结果集中截取出第 M~N 条记录</p> <h3 id="二、如何实现-3"><a href="#二、如何实现-3" class="header-anchor">#</a> 二、如何实现</h3> <p>前端实现分页功能，需要后端返回必要的数据，如总的页数，总的数据量，当前页，当前的数据</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
 <span class="token string-property property">&quot;totalCount&quot;</span><span class="token operator">:</span> <span class="token number">1836</span><span class="token punctuation">,</span>   <span class="token comment">// 总的条数</span>
 <span class="token string-property property">&quot;totalPages&quot;</span><span class="token operator">:</span> <span class="token number">92</span><span class="token punctuation">,</span>  <span class="token comment">// 总页数</span>
 <span class="token string-property property">&quot;currentPage&quot;</span><span class="token operator">:</span> <span class="token number">1</span>   <span class="token comment">// 当前页数</span>
 <span class="token string-property property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>     <span class="token comment">// 当前页的数据</span>
   <span class="token punctuation">{</span>
 <span class="token operator">...</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><p>后端采用<code>mysql</code>作为数据的持久性存储</p> <p>前端向后端发送目标的页码<code>page</code>以及每页显示数据的数量<code>pageSize</code>，默认情况每次取 10 条数据，则每一条数据的起始位置<code>start</code>为：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> start <span class="token operator">=</span> <span class="token punctuation">(</span>page <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> pageSize
</code></pre></div><p>当确定了<code>limit</code>和<code>start</code>的值后，就能够确定<code>SQL</code>语句：</p> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token keyword">const</span> sql <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">SELECT * FROM record limit </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>pageSize<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> OFFSET </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>start<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">;</span><span class="token template-punctuation string">`</span></span>
</code></pre></div><p>上诉<code>SQL</code>语句表达的意思为：截取从<code>start</code>到<code>start</code>+<code>pageSize</code>之间（左闭右开）的数据</p> <p>关于查询数据总数的<code>SQL</code>语句为，<code>record</code>为表名：</p> <div class="language-mysql extra-class"><pre class="language-text"><code>SELECT COUNT(*) FROM record
</code></pre></div><p>因此后端的处理逻辑为：</p> <ul><li>获取用户参数页码数 page 和每页显示的数目 pageSize ，其中 page 是必须传递的参数，pageSize 为可选参数，默认为 10</li> <li>编写 SQL 语句，利用 limit 和 OFFSET 关键字进行分页查询</li> <li>查询数据库，返回总数据量、总页数、当前页、当前页数据给前端</li></ul> <p>代码如下所示：</p> <div class="language-js extra-class"><pre class="language-js"><code>router<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token string">'/api'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> param <span class="token operator">=</span> <span class="token string">''</span>
  <span class="token comment">// 获取参数</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>req<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">'POST'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    param <span class="token operator">=</span> req<span class="token punctuation">.</span>body
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    param <span class="token operator">=</span> req<span class="token punctuation">.</span>query <span class="token operator">||</span> req<span class="token punctuation">.</span>params
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>param<span class="token punctuation">.</span>page <span class="token operator">==</span> <span class="token string">''</span> <span class="token operator">||</span> param<span class="token punctuation">.</span>page <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> param<span class="token punctuation">.</span>page <span class="token operator">==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token string">'请传入参数page'</span><span class="token punctuation">,</span> <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">'102'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> pageSize <span class="token operator">=</span> param<span class="token punctuation">.</span>pageSize <span class="token operator">||</span> <span class="token number">10</span>
  <span class="token keyword">const</span> start <span class="token operator">=</span> <span class="token punctuation">(</span>param<span class="token punctuation">.</span>page <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> pageSize
  <span class="token keyword">const</span> sql <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">SELECT * FROM record limit </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>pageSize<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> OFFSET </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>start<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">;</span><span class="token template-punctuation string">`</span></span>
  pool<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> connection</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">throw</span> err
    connection<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> results</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      connection<span class="token punctuation">.</span><span class="token function">release</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> err
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// 计算总页数</span>
        <span class="token keyword">var</span> allCount <span class="token operator">=</span> results<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'COUNT(*)'</span><span class="token punctuation">]</span>
        <span class="token keyword">var</span> allPage <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>allCount<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">20</span>
        <span class="token keyword">var</span> pageStr <span class="token operator">=</span> allPage<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment">// 不能被整除</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>pageStr<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          allPage <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>pageStr<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">var</span> list <span class="token operator">=</span> results<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
        res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span>
          <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token string">'操作成功'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">'200'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">totalPages</span><span class="token operator">:</span> allPage<span class="token punctuation">,</span>
            <span class="token literal-property property">currentPage</span><span class="token operator">:</span> param<span class="token punctuation">.</span>page<span class="token punctuation">,</span>
            <span class="token literal-property property">totalCount</span><span class="token operator">:</span> allCount<span class="token punctuation">,</span>
            <span class="token literal-property property">data</span><span class="token operator">:</span> list
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="三、总结"><a href="#三、总结" class="header-anchor">#</a> 三、总结</h3> <p>通过上面的分析，可以看到分页查询的关键在于，要首先确定每页显示的数量<code>pageSize</code>，然后根据当前页的索引<code>pageIndex</code>（从 1 开始），确定<code>LIMIT</code>和<code>OFFSET</code>应该设定的值：</p> <ul><li>LIMIT 总是设定为 pageSize</li> <li>OFFSET 计算公式为 pageSize * (pageIndex - 1)</li></ul> <p>确定了这两个值，就能查询出第 <code>N</code>页的数据</p> <h3 id="参考文献-8"><a href="#参考文献-8" class="header-anchor">#</a> 参考文献</h3> <ul><li>https://www.liaoxuefeng.com/wiki/1177760294764384/1217864791925600</li></ul> <h2 id="node-性能如何进行监控以及优化"><a href="#node-性能如何进行监控以及优化" class="header-anchor">#</a> Node 性能如何进行监控以及优化？</h2> <h3 id="一、-是什么"><a href="#一、-是什么" class="header-anchor">#</a> 一、 是什么</h3> <p><code>Node</code>作为一门服务端语言，性能方面尤为重要，其衡量指标一般有如下：</p> <ul><li>CPU</li> <li>内存</li> <li>I/O</li> <li>网络</li></ul> <h3 id="cpu"><a href="#cpu" class="header-anchor">#</a> CPU</h3> <p>主要分成了两部分：</p> <ul><li>CPU 负载：在某个时间段内，占用以及等待 CPU 的进程总数</li> <li>CPU 使用率：CPU 时间占用状况，等于 1 - 空闲 CPU 时间(idle time) / CPU 总时间</li></ul> <p>这两个指标都是用来评估系统当前 CPU 的繁忙程度的量化指标</p> <p><code>Node</code>应用一般不会消耗很多的<code>CPU</code>，如果<code>CPU</code>占用率高，则表明应用存在很多同步操作，导致异步任务回调被阻塞</p> <h3 id="内存指标"><a href="#内存指标" class="header-anchor">#</a> 内存指标</h3> <p>内存是一个非常容易量化的指标。 内存占用率是评判一个系统的内存瓶颈的常见指标。 对于 Node 来说，内部内存堆栈的使用状态也是一个可以量化的指标</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// /app/lib/memory.js</span>
<span class="token keyword">const</span> os <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'os'</span><span class="token punctuation">)</span>
<span class="token comment">// 获取当前Node内存堆栈情况</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> rss<span class="token punctuation">,</span> heapUsed<span class="token punctuation">,</span> heapTotal <span class="token punctuation">}</span> <span class="token operator">=</span> process<span class="token punctuation">.</span><span class="token function">memoryUsage</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 获取系统空闲内存</span>
<span class="token keyword">const</span> sysFree <span class="token operator">=</span> os<span class="token punctuation">.</span><span class="token function">freemem</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 获取系统总内存</span>
<span class="token keyword">const</span> sysTotal <span class="token operator">=</span> os<span class="token punctuation">.</span><span class="token function">totalmem</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">memory</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">sys</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token operator">-</span> sysFree <span class="token operator">/</span> sysTotal<span class="token punctuation">,</span> <span class="token comment">// 系统内存占用率</span>
      <span class="token literal-property property">heap</span><span class="token operator">:</span> heapUsed <span class="token operator">/</span> headTotal<span class="token punctuation">,</span> <span class="token comment">// Node堆内存占用率</span>
      <span class="token literal-property property">node</span><span class="token operator">:</span> rss <span class="token operator">/</span> sysTotal <span class="token comment">// Node占用系统内存的比例</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>rss：表示 node 进程占用的内存总量。</li> <li>heapTotal：表示堆内存的总量。</li> <li>heapUsed：实际堆内存的使用量。</li> <li>external ：外部程序的内存使用量，包含 Node 核心的 C++程序的内存使用量</li></ul> <p>在<code>Node</code>中，一个进程的最大内存容量为 1.5GB。因此我们需要减少内存泄露</p> <h3 id="磁盘-i-o"><a href="#磁盘-i-o" class="header-anchor">#</a> 磁盘 I/O</h3> <p>硬盘的<code>IO</code> 开销是非常昂贵的，硬盘 IO 花费的 CPU 时钟周期是内存的 164000 倍</p> <p>内存 <code>IO</code>比磁盘<code>IO</code> 快非常多，所以使用内存缓存数据是有效的优化方法。常用的工具如 <code>redis</code>、<code>memcached</code>等</p> <p>并不是所有数据都需要缓存，访问频率高，生成代价比较高的才考虑是否缓存，也就是说影响你性能瓶颈的考虑去缓存，并且而且缓存还有缓存雪崩、缓存穿透等问题要解决</p> <h3 id="二、如何监控"><a href="#二、如何监控" class="header-anchor">#</a> 二、如何监控</h3> <p>关于性能方面的监控，一般情况都需要借助工具来实现</p> <p>这里采用<code>Easy-Monitor 2.0</code>，其是轻量级的 <code>Node.js</code> 项目内核性能监控 + 分析工具，在默认模式下，只需要在项目入口文件 <code>require</code> 一次，无需改动任何业务代码即可开启内核级别的性能监控分析</p> <p>使用方法如下：</p> <p>在你的项目入口文件中按照如下方式引入，当然请传入你的项目名称：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> easyMonitor <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'easy-monitor'</span><span class="token punctuation">)</span>
<span class="token function">easyMonitor</span><span class="token punctuation">(</span><span class="token string">'你的项目名称'</span><span class="token punctuation">)</span>
</code></pre></div><p>打开你的浏览器，访问 <code>http://localhost:12333</code> ，即可看到进程界面</p> <p>关于定制化开发、通用配置项以及如何动态更新配置项详见官方文档</p> <h3 id="三、如何优化"><a href="#三、如何优化" class="header-anchor">#</a> 三、如何优化</h3> <p>关于<code>Node</code>的性能优化的方式有：</p> <ul><li>使用最新版本 Node.js</li> <li>正确使用流 Stream</li> <li>代码层面优化</li> <li>内存管理优化</li></ul> <h3 id="使用最新版本-node-js"><a href="#使用最新版本-node-js" class="header-anchor">#</a> 使用最新版本 Node.js</h3> <p>每个版本的性能提升主要来自于两个方面：</p> <ul><li>V8 的版本更新</li> <li>Node.js 内部代码的更新优化</li></ul> <h3 id="正确使用流-stream"><a href="#正确使用流-stream" class="header-anchor">#</a> 正确使用流 Stream</h3> <p>在<code>Node</code>中，很多对象都实现了流，对于一个大文件可以通过流的形式发送，不需要将其完全读入内存</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>

<span class="token comment">// bad</span>
http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>__dirname <span class="token operator">+</span> <span class="token string">'/data.txt'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// good</span>
http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> stream <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createReadStream</span><span class="token punctuation">(</span>__dirname <span class="token operator">+</span> <span class="token string">'/data.txt'</span><span class="token punctuation">)</span>
  stream<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="代码层面优化"><a href="#代码层面优化" class="header-anchor">#</a> 代码层面优化</h3> <p>合并查询，将多次查询合并一次，减少数据库的查询次数</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// bad</span>
<span class="token keyword">for</span> user_id <span class="token keyword">in</span> userIds
     <span class="token keyword">let</span> account <span class="token operator">=</span> user_account<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span>user_id<span class="token punctuation">)</span>

<span class="token comment">// good</span>
<span class="token keyword">const</span> user_account_map <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>   <span class="token comment">// 注意这个对象将会消耗大量内存。</span>
user_account<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>user_id <span class="token keyword">in</span> user_ids<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">account</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    user_account_map<span class="token punctuation">[</span>account<span class="token punctuation">.</span>user_id<span class="token punctuation">]</span> <span class="token operator">=</span>  account
<span class="token punctuation">}</span>
<span class="token keyword">for</span> user_id <span class="token keyword">in</span> userIds
    <span class="token keyword">var</span> account <span class="token operator">=</span> user_account_map<span class="token punctuation">[</span>user_id<span class="token punctuation">]</span>
</code></pre></div><h3 id="内存管理优化"><a href="#内存管理优化" class="header-anchor">#</a> 内存管理优化</h3> <p>在 V8 中，主要将内存分为新生代和老生代两代：</p> <ul><li>新生代：对象的存活时间较短。新生对象或只经过一次垃圾回收的对象</li> <li>老生代：对象存活时间较长。经历过一次或多次垃圾回收的对象</li></ul> <p>若新生代内存空间不够，直接分配到老生代</p> <p>通过减少内存占用，可以提高服务器的性能。如果有内存泄露，也会导致大量的对象存储到老生代中，服务器性能会大大降低</p> <p>如下面情况：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> buffer <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>__dirname <span class="token operator">+</span> <span class="token string">'/source/index.htm'</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>
  <span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">ctx</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    ctx<span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token number">200</span>
    ctx<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">'html'</span>
    ctx<span class="token punctuation">.</span>body <span class="token operator">=</span> buffer
    leak<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>__dirname <span class="token operator">+</span> <span class="token string">'/source/index.htm'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>

<span class="token keyword">const</span> leak <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
</code></pre></div><p><code>leak</code>的内存非常大，造成内存泄露，应当避免这样的操作，通过减少内存使用，是提高服务性能的手段之一</p> <p>而节省内存最好的方式是使用池，其将频用、可复用对象存储起来，减少创建和销毁操作</p> <p>例如有个图片请求接口，每次请求，都需要用到类。若每次都需要重新 new 这些类，并不是很合适，在大量请求时，频繁创建和销毁这些类，造成内存抖动</p> <p>使用对象池的机制，对这种频繁需要创建和销毁的对象保存在一个对象池中。每次用到该对象时，就取对象池空闲的对象，并对它进行初始化操作，从而提高框架的性能</p> <h3 id="参考文献-9"><a href="#参考文献-9" class="header-anchor">#</a> 参考文献</h3> <ul><li>https://segmentfault.com/a/1190000039327565</li> <li>https://zhuanlan.zhihu.com/p/50055740</li> <li>https://segmentfault.com/a/1190000010231628</li></ul> <h2 id="package-json-中-scripts-的-postinstall-install-preinstall"><a href="#package-json-中-scripts-的-postinstall-install-preinstall" class="header-anchor">#</a> package.json 中 scripts 的 postinstall, install， preinstall</h2> <p>在前端开发中，<code>package.json</code>  文件是一个非常核心的组成部分，特别是在使用 Node.js 和 npm 管理项目依赖时。<code>package.json</code>  中的  <code>scripts</code>  字段允许开发者定义在特定时机自动运行的脚本。这些脚本在项目的生命周期中的特定阶段被执行，例如安装、测试、启动等。</p> <p>对于  <code>postinstall</code>、<code>install</code>  和  <code>preinstall</code>  这三个脚本，它们主要关联于依赖项的安装过程。下面是每个脚本的详细说明：</p> <h3 id="preinstall"><a href="#preinstall" class="header-anchor">#</a> preinstall</h3> <ul><li>触发时机：在 npm 开始安装当前项目的依赖之前执行。</li> <li>用途：通常用于执行一些必要的准备工作，比如设置环境变量，检查系统环境是否符合特定要求等。</li></ul> <h3 id="install"><a href="#install" class="header-anchor">#</a> install</h3> <ul><li>触发时机：在  <code>npm install</code>  命令执行时，这个脚本被触发。</li> <li>用途：<code>install</code>  脚本通常是用来编译或构建项目。它可以被用作自动触发编译过程，例如对 TypeScript 项目进行编译或执行其他构建任务。不过，在实践中，<code>install</code>  通常不需要显式定义，因为 npm 默认行为已经涵盖了安装依赖的操作。</li></ul> <h3 id="postinstall"><a href="#postinstall" class="header-anchor">#</a> postinstall</h3> <ul><li>触发时机：在 npm 安装项目依赖后执行。</li> <li>用途：这是最常用的脚本之一，用于在依赖安装完成后执行一些后处理操作，例如执行数据库迁移、本地化的构建脚本或者其他需要在依赖完全安装后执行的任务。</li></ul> <p>这些脚本在自动化和简化开发流程中扮演了重要的角色，可以显著提高开发效率和项目的可维护性。它们是自动化部署流程的重要组成部分，特别是在持续集成/持续部署 (CI/CD) 环境中。</p> <p><strong>参考</strong></p> <ul><li>https://www.ruanyifeng.com/blog/2016/10/npm_scripts.html</li></ul> <h2 id="pm2"><a href="#pm2" class="header-anchor">#</a> PM2</h2> <p>PM2 是 Node.js 的优秀运行时管理工具，专为简化和优化 Node.js 应用程序的生产部署与运行而设计。</p> <p>pm2 官网 https://pm2.keymetrics.io/</p> <p>https://docs.ffffee.com/nodejs/pm2-quickstart.html</p> <h2 id="对-node-中-commonjs-和-es-modules-及-node-发展的理解"><a href="#对-node-中-commonjs-和-es-modules-及-node-发展的理解" class="header-anchor">#</a> 对 Node 中 CommonJS 和 ES Modules，及 Node 发展的理解</h2> <h3 id="一、node-js-中-require-和-mjs-的使用"><a href="#一、node-js-中-require-和-mjs-的使用" class="header-anchor">#</a> 一、Node.js 中 <code>require</code> 和 <code>.mjs</code> 的使用</h3> <p>Node.js 提供了两种模块系统：<strong>CommonJS</strong>（使用 <code>require</code>）和 <strong>ES 模块</strong>（使用 <code>import/export</code>，通常与 <code>.mjs</code> 文件关联）。这两种系统在 Node.js 中并存，但适用场景和配置方式不同。</p> <h4 id="_1-commonjs-require-和-module-exports"><a href="#_1-commonjs-require-和-module-exports" class="header-anchor">#</a> 1. CommonJS（<code>require</code> 和 <code>module.exports</code>）</h4> <ul><li><p><strong>概述</strong>：</p> <ul><li>CommonJS 是 Node.js 传统的模块系统，默认使用 <code>.js</code> 文件。</li> <li>使用 <code>require</code> 引入模块，<code>module.exports</code> 或 <code>exports</code> 导出模块。</li> <li>同步加载模块，适合服务器端开发。</li></ul></li> <li><p><strong>使用场景</strong>：</p> <ul><li>传统 Node.js 项目（如 Express 应用）。</li> <li>需要兼容旧代码或依赖 CommonJS 格式的第三方库（如 <code>fs</code>、<code>http</code>）。</li></ul></li> <li><p><strong>代码示例</strong>：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// math.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">add</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> a <span class="token operator">+</span> b
<span class="token punctuation">}</span>

<span class="token comment">// index.js</span>
<span class="token keyword">const</span> math <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./math'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>math<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 输出: 5</span>
</code></pre></div><ul><li><p>示例结合正则表达式验证邮箱：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// validate.js</span>
<span class="token keyword">const</span> regex <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(\S+)@([a-z0-9A-Z]+(-[a-z0-9A-Z]+)?\.)+[a-zA-Z]{2,}$</span><span class="token regex-delimiter">/</span></span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">validateEmail</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">email</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> regex<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>email<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// index.js</span>
<span class="token keyword">const</span> validate <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./validate'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>validate<span class="token punctuation">.</span><span class="token function">validateEmail</span><span class="token punctuation">(</span><span class="token string">'user@domain.com'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>validate<span class="token punctuation">.</span><span class="token function">validateEmail</span><span class="token punctuation">(</span><span class="token string">'invalid@domain.commfdhaosdfjasda'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
</code></pre></div></li></ul></li> <li><p><strong>注意事项</strong>：</p> <ul><li><code>require</code> 是同步的，适合加载本地模块，但不适合浏览器环境。</li> <li>默认情况下，Node.js 将 <code>.js</code> 文件视为 CommonJS，除非配置了 <code>type: &quot;module&quot;</code>。</li> <li>不能直接在 CommonJS 中使用 <code>import/export</code>，否则会抛出语法错误。</li></ul></li></ul> <h4 id="_2-es-模块-mjs-和-import-export"><a href="#_2-es-模块-mjs-和-import-export" class="header-anchor">#</a> 2. ES 模块（<code>.mjs</code> 和 <code>import/export</code>）</h4> <ul><li><p><strong>概述</strong>：</p> <ul><li>ES 模块是 ECMAScript 标准化的模块系统，Node.js 从 12.x 开始实验性支持，14.x 后稳定。</li> <li>使用 <code>import</code> 引入模块，<code>export</code> 导出模块。</li> <li>默认异步加载，支持动态导入，适合现代 JavaScript 项目。</li> <li>使用 <code>.mjs</code> 文件扩展名明确表示 ES 模块，或者在 <code>package.json</code> 中设置 <code>&quot;type&quot;: &quot;module&quot;</code>。</li></ul></li> <li><p><strong>使用场景</strong>：</p> <ul><li>现代 Node.js 项目，特别是在需要与前端代码（React、Vue 等）保持一致时。</li> <li>使用支持 ES 模块的库（如 <code>node-fetch</code> 3.x）。</li> <li>需要动态导入或 tree-shaking 优化。</li></ul></li> <li><p><strong>代码示例</strong>：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// math.mjs</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> a <span class="token operator">+</span> b

<span class="token comment">// index.mjs</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> add <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./math.mjs'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 输出: 5</span>
</code></pre></div><ul><li><p>示例结合正则表达式验证邮箱：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// validate.mjs</span>
<span class="token keyword">const</span> regex <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(\S+)@([a-z0-9A-Z]+(-[a-z0-9A-Z]+)?\.)+[a-zA-Z]{2,}$</span><span class="token regex-delimiter">/</span></span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">validateEmail</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">email</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> regex<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>email<span class="token punctuation">)</span>

<span class="token comment">// index.mjs</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> validateEmail <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./validate.mjs'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">validateEmail</span><span class="token punctuation">(</span><span class="token string">'user@domain.com'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">validateEmail</span><span class="token punctuation">(</span><span class="token string">'invalid@domain.commfdhaosdfjasda'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
</code></pre></div></li></ul></li> <li><p><strong>配置 ES 模块</strong>：</p> <ul><li><p><strong>使用 <code>.mjs</code> 文件</strong>：Node.js 自动将 <code>.mjs</code> 文件视为 ES 模块，无需额外配置。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">node</span> index.mjs
</code></pre></div></li> <li><p><strong>使用 <code>.js</code> 文件</strong>：在 <code>package.json</code> 中添加 <code>&quot;type&quot;: &quot;module&quot;</code>，使所有 <code>.js</code> 文件默认使用 ES 模块：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;module&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>示例：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// validate.js</span>
<span class="token keyword">const</span> regex <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(\S+)@([a-z0-9A-Z]+(-[a-z0-9A-Z]+)?\.)+[a-zA-Z]{2,}$</span><span class="token regex-delimiter">/</span></span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">validateEmail</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">email</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> regex<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>email<span class="token punctuation">)</span>

<span class="token comment">// index.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> validateEmail <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./validate.js'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">validateEmail</span><span class="token punctuation">(</span><span class="token string">'user@domain.com'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre></div></li> <li><p>如果 <code>package.json</code> 中没有 <code>&quot;type&quot;: &quot;module&quot;</code>，<code>.js</code> 文件默认使用 CommonJS。</p></li></ul></li> <li><p><strong>动态导入</strong>：</p> <ul><li>ES 模块支持动态导入，适合按需加载模块：<div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// index.mjs</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> validateEmail <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./validate.mjs'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">validateEmail</span><span class="token punctuation">(</span><span class="token string">'user@domain.com'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre></div></li></ul></li> <li><p><strong>注意事项</strong>：</p> <ul><li><code>.mjs</code> 文件不能使用 <code>require</code> 或 <code>module.exports</code>，否则会抛出错误。</li> <li>部分第三方库仍只支持 CommonJS，可能需要额外配置（如使用 <code>createRequire</code>）。</li> <li>异步导入可能增加复杂性，但更灵活。</li></ul></li></ul> <h4 id="_3-commonjs-和-es-模块的互操作"><a href="#_3-commonjs-和-es-模块的互操作" class="header-anchor">#</a> 3. CommonJS 和 ES 模块的互操作</h4> <ul><li><p><strong>从 ES 模块导入 CommonJS</strong>：</p> <ul><li><p>ES 模块可以直接导入 CommonJS 模块：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// commonjs-module.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token string">'bar'</span> <span class="token punctuation">}</span>

<span class="token comment">// index.mjs</span>
<span class="token keyword">import</span> commonjsModule <span class="token keyword">from</span> <span class="token string">'./commonjs-module.js'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>commonjsModule<span class="token punctuation">.</span>foo<span class="token punctuation">)</span> <span class="token comment">// bar</span>
</code></pre></div></li></ul></li> <li><p><strong>从 CommonJS 导入 ES 模块</strong>：</p> <ul><li><p>CommonJS 不能直接使用 <code>import</code>，但可以使用动态导入或 <code>createRequire</code>：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// es-module.mjs</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> foo <span class="token operator">=</span> <span class="token string">'bar'</span>

<span class="token comment">// index.js (CommonJS)</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> createRequire <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'module'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> require <span class="token operator">=</span> <span class="token function">createRequire</span><span class="token punctuation">(</span><span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>url<span class="token punctuation">)</span>
<span class="token keyword">const</span> esModule <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./es-module.mjs'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>esModule<span class="token punctuation">.</span>foo<span class="token punctuation">)</span> <span class="token comment">// bar</span>
</code></pre></div></li> <li><p>或者使用动态导入：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// index.js</span>
<span class="token punctuation">;</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> foo <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./es-module.mjs'</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span> <span class="token comment">// bar</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div></li></ul></li> <li><p><strong>注意</strong>：互操作可能导致兼容性问题，建议尽量统一模块系统（例如全用 ES 模块）。</p></li></ul> <h4 id="_4-如何选择-require-和-mjs"><a href="#_4-如何选择-require-和-mjs" class="header-anchor">#</a> 4. 如何选择 <code>require</code> 和 <code>.mjs</code></h4> <ul><li><strong>使用 CommonJS（<code>require</code>）</strong>：
<ul><li>项目依赖大量 CommonJS 库（如老版本的 <code>express</code>）。</li> <li>团队熟悉 CommonJS，迁移成本高。</li> <li>简单项目，不需要 ES 模块的动态导入或 tree-shaking。</li></ul></li> <li><strong>使用 ES 模块（<code>.mjs</code> 或 <code>&quot;type&quot;: &quot;module&quot;</code>）</strong>：
<ul><li>新项目，追求现代 JavaScript 标准。</li> <li>与前端代码共享模块（如使用 Vite 或 Rollup 打包）。</li> <li>需要动态导入或支持新顶级域名（如结合正则表达式验证复杂邮箱）。</li></ul></li> <li><strong>混合使用</strong>：
<ul><li>在过渡期，使用 <code>createRequire</code> 或动态导入处理兼容性问题。</li> <li>逐步将 CommonJS 模块重写为 ES 模块。</li></ul></li></ul> <hr> <h3 id="二、node-js-当前发展现状-截至-2025年4月28日"><a href="#二、node-js-当前发展现状-截至-2025年4月28日" class="header-anchor">#</a> 二、Node.js 当前发展现状（截至 2025年4月28日）</h3> <p>Node.js 作为服务器端 JavaScript 运行时，近年来持续快速发展，社区活跃，生态系统庞大。以下是从功能更新、社区动态和行业采用等方面对 Node.js 发展的总结，部分信息基于 X 平台和网络搜索的最新动态。</p> <h4 id="_1-版本和功能更新"><a href="#_1-版本和功能更新" class="header-anchor">#</a> 1. 版本和功能更新</h4> <ul><li><strong>最新版本</strong>：
<ul><li>截至 2025年4月，Node.js 的最新 LTS（长期支持）版本为 20.x（2023年10月发布，维护至 2026年4月），最新当前版本为 22.x（2024年10月发布）。</li> <li>Node.js 保持每半年发布一个新版本（偶数版本，如 22、24），奇数版本为实验性版本。</li></ul></li> <li><strong>关键功能更新</strong>：
<ul><li><strong>ES 模块支持</strong>：ES 模块已完全稳定，Node.js 22.x 进一步优化了模块加载性能，支持 <code>.mjs</code> 和 <code>&quot;type&quot;: &quot;module&quot;</code> 成为主流。</li> <li><strong>V8 引擎升级</strong>：Node.js 22.x 使用 V8 12.x，支持最新的 JavaScript 特性（如 <code>Array.fromAsync</code>、WebAssembly 增强），对正则表达式性能有优化。</li> <li><strong>内置测试框架</strong>：Node.js 18.x 引入了内置测试模块（<code>node:test</code>），22.x 增强了测试覆盖率报告，减少对 Mocha/Jest 的依赖。</li> <li><strong>HTTP/2 和 Web 标准</strong>：Node.js 强化了对 HTTP/2 和 Web API（如 <code>fetch</code>、<code>Web Streams</code>）的支持，与浏览器环境更接近。</li> <li><strong>性能优化</strong>：22.x 改进了事件循环和垃圾回收，适合高并发应用（如实时聊天、API 服务器）。</li> <li><strong>单文件可执行文件</strong>：Node.js 20.x 引入了实验性的单文件打包功能，22.x 进一步完善，方便部署。</li></ul></li></ul> <h4 id="_2-社区和生态"><a href="#_2-社区和生态" class="header-anchor">#</a> 2. 社区和生态</h4> <ul><li><strong>活跃社区</strong>：
<ul><li>Node.js 在 GitHub（https://github.com/nodejs/node）有超过 100k 星标，社区贡献者众多。</li> <li>X 平台上，@nodejs 账号定期发布更新，开发者讨论聚焦性能优化、ES 模块迁移和微服务架构。</li> <li>2024 年 Node.js Conf（线上/线下）吸引了大量开发者，讨论了 AI 驱动开发和 Node.js 在边缘计算的应用。</li></ul></li> <li><strong>生态系统</strong>：
<ul><li><strong>框架</strong>：Express 仍是最流行的 Web 框架，但 Fastify 和 NestJS 因性能和 TypeScript 支持快速增长。</li> <li><strong>工具</strong>：Vite、esbuild 等现代构建工具与 Node.js 集成紧密，支持 ES 模块。</li> <li><strong>库</strong>：大多数新库（如 <code>node-fetch</code> 3.x）默认支持 ES 模块，推动了模块系统现代化。</li></ul></li> <li><strong>文档改进</strong>：
<ul><li>官方文档（https://nodejs.org/en/docs/）持续优化，新增了更多 ES 模块示例。</li> <li>社区项目（如上文提到的 GPT-4 重写文档）提供了更简洁的替代文档。</li></ul></li></ul> <h4 id="_3-行业采用"><a href="#_3-行业采用" class="header-anchor">#</a> 3. 行业采用</h4> <ul><li><strong>广泛应用</strong>：
<ul><li>Node.js 被广泛用于 Web 开发（Netflix、LinkedIn）、微服务（Uber）、实时应用（Discord）、CLI 工具（Vite、ESLint）等。</li> <li>X 平台上，开发者提到 Node.js 在边缘计算（如 Cloudflare Workers）和 AI 后端（与 TensorFlow.js 集成）中的使用增加。</li></ul></li> <li><strong>挑战</strong>：
<ul><li>CommonJS 到 ES 模块的迁移仍是痛点，许多旧项目依赖 CommonJS，导致兼容性问题。</li> <li>性能瓶颈在极高并发场景下仍需优化，部分开发者转向 Bun 或 Deno（但 Node.js 生态更成熟）。</li></ul></li> <li><strong>竞争与替代</strong>：
<ul><li><strong>Deno</strong>：强调安全性和内置 TypeScript 支持，但生态远不如 Node.js。</li> <li><strong>Bun</strong>：以性能为卖点，2024 年达到 1.0，但在生产环境稳定性仍需验证。</li> <li>Node.js 凭借成熟生态和广泛采用，短期内仍是服务器端 JavaScript 的首选。</li></ul></li></ul> <h3 id="三、总结与建议"><a href="#三、总结与建议" class="header-anchor">#</a> 三、总结与建议</h3> <h4 id="require-和-mjs-使用建议"><a href="#require-和-mjs-使用建议" class="header-anchor">#</a> <code>require</code> 和 <code>.mjs</code> 使用建议</h4> <ul><li><strong>新项目</strong>：优先使用 ES 模块（<code>.mjs</code> 或 <code>&quot;type&quot;: &quot;module&quot;</code>），因为它符合现代 JavaScript 标准，易于与前端生态集成。</li> <li><strong>旧项目</strong>：继续使用 CommonJS，但考虑逐步迁移到 ES 模块，使用 <code>createRequire</code> 或动态导入过渡。</li> <li><strong>正则表达式场景</strong>：无论是 CommonJS 还是 ES 模块，都可以将正则表达式逻辑封装为独立模块（如上文示例），提高复用性。</li> <li><strong>最佳实践</strong>：
<ul><li>始终在 <code>package.json</code> 中明确 <code>&quot;type&quot;</code>，避免模块类型混淆。</li> <li>使用工具（如 <code>esbuild</code>）检查模块兼容性。</li> <li>测试模块加载性能，特别是在动态导入大量正则表达式逻辑时。</li></ul></li></ul> <h2 id="参考"><a href="#参考" class="header-anchor">#</a> 参考</h2> <ul><li>https://vue3js.cn/interview/NodeJS/</li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/yanyue404/fe-attitude/edit/master/site/fe/node.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">4/28/2025, 10:33:18 AM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/fe-attitude/assets/js/app.7a42581c.js" defer></script><script src="/fe-attitude/assets/js/2.e3af99bf.js" defer></script><script src="/fe-attitude/assets/js/21.7c7ee976.js" defer></script>
  </body>
</html>
