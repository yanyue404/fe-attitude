<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
  </head>
  <body>
    <script>
      // 输入：
      // 一个由 x，- 和 _ 组成的字符串。

      // 输出：
      // 一个数组对象。'x' 产生一个 'on' 状态，'-'（连接符）产生一个 'off' 状态，而 '_' （下划线）表示 'on' 状态的长度。
      var str = 'x-x_';
      var retArr = [];

      str.replace(/(x_*)|(-)/g, function(match, p1, p2) {
        // p2 表示 /-/g 匹配到的
        // console.log(match, p1, p2);
        if (p1) {
          retArr.push({ on: true, length: p1.length });
        }
        if (p2) {
          retArr.push({ on: false, length: 1 });
        }
      });

      console.log(retArr);
    </script>
  </body>
</html>
